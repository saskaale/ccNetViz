!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";const n=Object.prototype.toString;t.exports=function(t){return n.call(t).endsWith("Array]")}},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r.r(e);var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,i;return e=t,i=[{key:"edgeSource",value:function(t){if(t.source.source){var e=this.edgeSource(t.source),r=this.edgeTarget(t.source);return{x:(e.x+r.x)/2,y:(e.y+r.y)/2,uniqid:t.uniqid,index:t.index,is_edge:!0,e:t.source}}return t.source}},{key:"edgeTarget",value:function(t){if(t.target.source){var e=this.edgeSource(t.target),r=this.edgeTarget(t.target);return{x:(e.x+r.x)/2,y:(e.y+r.y)/2,uniqid:t.uniqid,index:t.index,is_edge:!0,e:t.target}}return t.target}},{key:"getCurveShift",value:function(t,e){if((e=e||{}).x=e.y=e.cx=e.cy=0,!t)return e;if(t.t&&t.t>=1)if(t.t>=2){var r=this.edgeSource(t).y<.5?1:-1;e.cx=1.25*r,e.cy=0}else{var n=this.edgeSource(t),i=this.edgeTarget(t);e.x=n.x-i.x,e.y=n.y-i.y}return e}}],(r=null)&&n(e.prototype,r),i&&n(e,i),t}();function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"getSVGDimensions",value:function(t){return{height:t.getAttribute("height"),width:t.getAttribute("width")}}},{key:"getNodesCnt",value:function(t){return t.nodes.length}},{key:"getEdgesCnt",value:function(t){return t.lines.length+t.curves.length+t.circles.length}},{key:"getSize",value:function(t,e,r,n){var i=this.getSVGDimensions(t),o=.5*i.height,s=.5*i.width,a=n*Math.sqrt(s*o/(r+1));if(e){var u=e.size?e.size:e.minSize,h=e.size?e.size:e.maxSize;if((a=h?Math.min(h,a):a)<e.hideSize)return 0;a=u?Math.max(u,a):a}return a}}],(r=null)&&o(e.prototype,r),n&&o(e,n),t}();function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"lazyCacheArrow",value:function(t,e){var r=this.generateArrowHeadId(t);if(r in e)return e[r];var n=this.generateArrowHead(t,r);return e[r]=n,n}},{key:"generateArrowHeadId",value:function(t){var e=10;t.arrow&&t.arrow.size&&(e=t.arrow.size);var r=t.color||"rgb(204, 204, 204)",n=t.targetNodeRadius||5,i=e+"-"+(r=(r=(r=(r=r.replace(/\s+/g,"-")).replace("(","-")).replace(")","-")).replace(",",""))+n;return i.replace(/\s+/g,"-"),i}},{key:"generateArrowHead",value:function(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg","defs"),n=document.createElementNS("http://www.w3.org/2000/svg","path"),i=document.createElementNS("http://www.w3.org/2000/svg","marker"),o=t.arrow.size,s="M0,0 L0,"+o+"L"+o+","+o/2+" z";return n.setAttribute("d",s),n.setAttribute("fill",t.color||"rgb(204, 204, 204)"),i.setAttribute("markerWidth",o),i.setAttribute("markerHeight",o),i.setAttribute("id",e),i.setAttribute("refX",o+(t.targetNodeRadius||5)),i.setAttribute("refY",o/2),i.setAttribute("orient","auto"),i.setAttribute("markerUnits","userSpaceOnUse"),i.appendChild(n),r.appendChild(i),r}},{key:"updateStyles",value:function(t,e,r,n,i){var o,s,a=t.nodes.find((function(t){return t.uniqid==r.uniqid}));s=a&&void 0!==a.style?n[a.style]:n.node,void 0!==e.style&&(o=n[e.style]),void 0===o&&(o=n.edge);var u=s&&s.size;return s&&void 0!==s.texture&&(u-=u/2),void 0===r.index?o.targetNodeRadius=1:o.targetNodeRadius=u/2,o.width=o.width||1,o.color=o.color||"rgb(204, 204, 204)",i=i>o.arrow.maxSize?o.arrow.maxSize:i<=o.arrow.maxSize&&i>=o.arrow.minSize?i:i<o.arrow.minSize&&i>=o.arrow.hideSize?o.arrow.minSize:0,o.arrow.size=i,o}},{key:"quadraticCurvePoint",value:function(t,e,r,n,i,o){var a=(e+r)/2,u=(n+i)/2,h=r-e,c=i-n,l=(s.getNodesCnt(t),s.getEdgesCnt(t));return(o/=l<=25?4:l<=50?3:l<=100?2:1)<=1&&(o=1),{cx:a+-c/o,cy:u+h/o}}},{key:"getCurveBoundary",value:function(t,e,r,n,i,o,s,a){var u,h,c,l,f,g,d,v,m,p,w,y,b,x=r-t,M=n-e,_=i-r,k=o-n,E=s-i,S=a-o;function A(t,e){return t>e?e:t}function R(t,e){return t>e?t:t<e?e:t}for(var T=0;T<41;T++)v=(g=(h=t+(u=T*(1/40))*x)+u*((l=r+u*_)-h))+u*(l+u*(i+u*E-l)-g),m=(d=(c=e+u*M)+u*((f=n+u*k)-c))+u*(f+u*(o+u*S-f)-d),0==T?(p=v,w=m,y=v,b=m):(p=A(p,v),w=A(w,m),y=R(y,v),b=R(b,m));return{x:Math.round(p),y:Math.round(w),width:Math.round(y-p),height:Math.round(b-w)}}}],(r=null)&&a(e.prototype,r),n&&a(e,n),t}();function h(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){h(o,n,i,s,a,"next",t)}function a(t){h(o,n,i,s,a,"throw",t)}s(void 0)}))}}var l=function(){this.set=function(){var t=c(regeneratorRuntime.mark((function t(e,r,n,o){var a,h,c,l,f,g,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.lines,h=s.getSize(r,n.arrow,s.getEdgesCnt(e),.2),c=0;case 3:if(!(c<a.length)){t.next=14;break}return l=a[c],f=i.edgeSource(l),g=i.edgeTarget(l),(d=u.updateStyles(e,l,g,n,h)).arrowHead=u.lazyCacheArrow(d,o),t.next=11,this.draw(r,f,g,l.uniqid,d);case 11:c++,t.next=3;break;case 14:case"end":return t.stop()}}),t,this)})));return function(e,r,n,i){return t.apply(this,arguments)}}(),this.draw=function(){var t=c(regeneratorRuntime.mark((function t(e,r,n,i,o){var a,h,c,l,f,g,d,v,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=s.getSVGDimensions(e).height,h=s.getSVGDimensions(e).width,c=r.x*a,l=r.y*h,f=n.x*a,g=n.y*h,(d=document.createElementNS("http://www.w3.org/2000/svg","line")).setAttribute("id",i),d.setAttribute("x1",c),d.setAttribute("y1",l),d.setAttribute("x2",f),d.setAttribute("y2",g),d.setAttribute("stroke",o.color||"rgb(204, 204, 204)"),d.setAttribute("stroke-width",o.width||1),v=u.generateArrowHeadId(o),m="url(#"+v+")",d.setAttribute("marker-end",m),e.append(o.arrowHead),e.append(d);case 19:case"end":return t.stop()}}),t)})));return function(e,r,n,i,o){return t.apply(this,arguments)}}()};function f(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}function g(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){f(o,n,i,s,a,"next",t)}function a(t){f(o,n,i,s,a,"throw",t)}s(void 0)}))}}var d=function(){this.set=function(){var t=g(regeneratorRuntime.mark((function t(e,r,n,o){var a,h,c,l,f,g,d,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.curves,h=s.getSize(r,n.arrow,s.getEdgesCnt(e),.2),c=0;case 3:if(!(c<a.length)){t.next=15;break}return l=a[c],f=i.edgeSource(l),g=i.edgeTarget(l),(d=u.updateStyles(e,l,g,n,h)).arrowHead=u.lazyCacheArrow(d,o),v=s.getSize(r,void 0,s.getEdgesCnt(e),.5),t.next=12,this.draw(r,e,f,g,v,l.uniqid,d);case 12:c++,t.next=3;break;case 15:case"end":return t.stop()}}),t,this)})));return function(e,r,n,i){return t.apply(this,arguments)}}(),this.draw=function(){var t=g(regeneratorRuntime.mark((function t(e,r,n,i,o,a,h){var c,l,f,g,d,v,m,p,w,y,b,x,M;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=s.getSVGDimensions(e).height,l=s.getSVGDimensions(e).width,f=n.x*c,g=n.y*l,d=i.x*c,v=i.y*l,m=u.quadraticCurvePoint(r,f,d,g,v,o),p=m.cx,w=m.cy,y="M"+f+" "+g+" Q "+p+" "+w+" "+d+" "+v,(b=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("id",a),b.setAttribute("d",y),b.setAttribute("stroke",h.color||"rgb(204, 204, 204)"),b.setAttribute("stroke-width",h.width||1),b.setAttribute("fill","none"),x=u.generateArrowHeadId(h),M="url(#"+x+")",b.setAttribute("marker-end",M),e.append(h.arrowHead),e.append(b);case 21:case"end":return t.stop()}}),t)})));return function(e,r,n,i,o,s,a){return t.apply(this,arguments)}}()};function v(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}function m(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){v(o,n,i,s,a,"next",t)}function a(t){v(o,n,i,s,a,"throw",t)}s(void 0)}))}}var p=function(){this.set=function(){var t=m(regeneratorRuntime.mark((function t(e,r,n,o){var a,h,c,l,f,g,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.circles,h=s.getSize(r,n.arrow,s.getEdgesCnt(e),.2),c=0;case 3:if(!(c<a.length)){t.next=14;break}return l=a[c],f=i.edgeTarget(l),(g=u.updateStyles(e,l,f,n,h)).arrowHead=u.lazyCacheArrow(g,o),d=s.getSize(r,void 0,s.getEdgesCnt(e),.5),t.next=11,this.draw(r,f,l,d,g);case 11:c++,t.next=3;break;case 14:case"end":return t.stop()}}),t,this)})));return function(e,r,n,i){return t.apply(this,arguments)}}(),this.draw=function(){var t=m(regeneratorRuntime.mark((function t(e,r,n,i,o){var a,h,c,l,f,g,d,v,m,p,w,y,b;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=s.getSVGDimensions(e).height,h=s.getSVGDimensions(e).width,c=r.x*a,l=r.y*h,g=c-(f=2.5*i),d=c+f,v=l<a/2?l+f:l-f,m=u.getCurveBoundary(c,l,d,v,g,v,c,l),void 0!==n.weight&&(l<a?(l+=m.height,v=l+f):(l-=m.height,arrowHeadHmap,v=l-f)),p="M"+c+","+l+" C"+g+","+v+" "+d+","+v+" "+c+","+l,(w=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",p),w.setAttribute("stroke",o.color||"rgb(204, 204, 204)"),w.setAttribute("stroke-width",o.width||1),w.setAttribute("fill","none"),y=u.generateArrowHeadId(o),b="url(#"+y+")",w.setAttribute("marker-end",b),e.append(o.arrowHead),e.append(w);case 21:case"end":return t.stop()}}),t)})));return function(e,r,n,i,o){return t.apply(this,arguments)}}()};function w(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"updateStyles",value:function(t,e,r,n){var i;return void 0!==r.style&&(i=n[r.style]),void 0===i&&(i=n.node),i.size=s.getSize(t,i,s.getNodesCnt(e),.4),i.minSize=i.minSize||6,i.maxSize=i.maxSize||16,i.color=i.color||"rgb(255, 255, 255)",i}}],(r=null)&&w(e.prototype,r),n&&w(e,n),t}();function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var x=function t(e){if(b(this,t),this.r=this.g=this.b=0,this.a=1,e instanceof t)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a;else if(arguments.length>=3)this.r=arguments[0],this.g=arguments[1],this.b=arguments[2],arguments.length>3&&(this.a=arguments[3]);else if(/^rgba\((\d+), ?(\d+), ?(\d+), ?(\d+)\)$/i.test(e)){e=/^rgba\((\d+), ?(\d+), ?(\d+), ?(\d+)\)$/i.exec(e);var r=function(t){return parseInt(t,10)/255};this.r=r(e[1]),this.g=r(e[2]),this.b=r(e[3]),this.a=r(e[4])}else if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)){e=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e);var n=function(t){return parseInt(t,10)/255};this.r=n(e[1]),this.g=n(e[2]),this.b=n(e[3])}else if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)){e=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e);var i=function(t){return parseInt(t,10)/100};this.r=i(e[1]),this.g=i(e[2]),this.b=i(e[3])}else/^\#([0-9a-f]{6})$/i.test(e)&&(e=parseInt(e.substring(1),16),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255)};function M(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}function _(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){M(o,n,i,s,a,"next",t)}function a(t){M(o,n,i,s,a,"throw",t)}s(void 0)}))}}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var E=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n,i,o;return e=t,(r=[{key:"rgbStringToInt",value:function(t){return t.substring(4,t.length-1).replace(/ /g,"").split(",")}},{key:"convertColor",value:function(t,e){for(var r=new x(e.color),n=this.rgbStringToInt(e.color),i=this.rgbToHsl(parseInt(n[0]),parseInt(n[1]),parseInt(n[2])),o=0;o<t.length;o+=4){var s=t[o+0],a=t[o+1],u=t[o+2],h=(t[o+3],this.rgbToHsl(s,a,u));h.h,this.hslToRgb(i.h,h.s*(1.6*i.s),h.l*(1.6*i.l)),t[o+0]*=r.r,t[o+1]*=r.g,t[o+2]*=r.b,t[o+3]*=r.a}}},{key:"rgbToHsl",value:function(t,e,r){t/=255,e/=255,r/=255;var n,i,o=Math.max(t,e,r),s=Math.min(t,e,r),a=(o+s)/2;if(o==s)n=i=0;else{var u=o-s;switch(i=a>.5?u/(2-o-s):u/(o+s),o){case t:n=(e-r)/u+(e<r?6:0);break;case e:n=(r-t)/u+2;break;case r:n=(t-e)/u+4}n/=6}return{h:n,s:i,l:a}}},{key:"hslToRgb",value:function(t,e,r){var n,i,o;if(0==e)n=i=o=r;else{var s=function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t},a=r<.5?r*(1+e):r+e-r*e,u=2*r-a;n=s(u,a,t+1/3),i=s(u,a,t),o=s(u,a,t-1/3)}return{r:Math.round(255*n),g:Math.round(255*i),b:Math.round(255*o)}}},{key:"lazyCacheNodes",value:(o=_(regeneratorRuntime.mark((function t(e,r,n,i,o,s){var a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!((a=this.generateNodeKey(o))in s)){t.next=7;break}return t.next=5,this.appendNodeImage(e,r,n,i,o,s[a]);case 5:t.next=13;break;case 7:return t.next=9,this.getImageData(o);case 9:return u=t.sent,s[a]=u,t.next=13,this.appendNodeImage(e,r,n,i,o,u);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0);case 18:case"end":return t.stop()}}),t,this,[[0,15]])}))),function(t,e,r,n,i,s){return o.apply(this,arguments)})},{key:"generateNodeKey",value:function(t){return(t.size||16)+"-"+t.texture+"-"+(t.color||"null")}},{key:"getImageData",value:(i=_(regeneratorRuntime.mark((function t(e){var r,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.texture,t.abrupt("return",new Promise((function(t,i){var o=document.createElement("canvas");o.id="nodeCanvas";var s=new Image;s.src=r,s.onload=function(){o.width=s.height,o.height=s.height;var r=o.getContext("2d");r.drawImage(s,0,0);var i=r.getImageData(0,0,o.width,o.height);void 0!==e.color&&n.convertColor(i.data,e),r.putImageData(i,0,0);var a=o.toDataURL();t(a)}})));case 2:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)})},{key:"appendNodeImage",value:function(t,e,r,n,i,o){return new Promise((function(s,a){var u=new Image;u.src=o,u.onload=function(){var o=document.createElementNS("http://www.w3.org/2000/svg","image"),a=i.size||5;o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u.src),o.setAttribute("x",e-a/2),o.setAttribute("y",r-a/2),o.setAttribute("id",n),o.setAttribute("height",a),o.setAttribute("width",a),t.append(o),s()}}))}}])&&k(e.prototype,r),n&&k(e,n),t}();function S(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}function A(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){S(o,n,i,s,a,"next",t)}function a(t){S(o,n,i,s,a,"throw",t)}s(void 0)}))}}var R=function(){var t={};this.set=function(){var t=A(regeneratorRuntime.mark((function t(e,r,n){var i,o,s,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=e.nodes,o=0;o<i.length;o++)s=i[o],a=y.updateStyles(r,e,s,n),this.draw(r,s,a);case 2:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),this.customeNode=function(){var e=A(regeneratorRuntime.mark((function e(r,n,i,o,s){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new E,e.next=3,a.lazyCacheNodes(r,n,i,"node-"+o,s,t);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}(),this.draw=function(){var t=A(regeneratorRuntime.mark((function t(e,r,n){var i,o,a,u,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=s.getSVGDimensions(e).height,o=s.getSVGDimensions(e).width,a=r.x*i,u=r.y*o,"http://www.w3.org/2000/svg",(h=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttributeNS(null,"cx",a),h.setAttributeNS(null,"cy",u),h.setAttributeNS(null,"r",n.size/2||5),!n||void 0===n.texture){t.next=14;break}return t.next=12,this.customeNode(e,a,u,r.uniqid,n);case 12:t.next=18;break;case 14:h.setAttributeNS(null,"id","node-"+r.uniqid),h.setAttributeNS(null,"fill",n&&n.color||"black"),h.setAttributeNS(null,"stroke","none"),e.appendChild(h);case 18:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}()};function T(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var C=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"updateStyles",value:function(t,e,r){var n;return void 0!==t.style&&(n=e[t.style]),void 0===n&&(n=e.node),r<n.label.hideSize&&(n.label.font.size=0),n}},{key:"updatePosition",value:function(t,e,r,n,i){var o=e.x*n,s=e.y*r,a=i&&i.size?i.size/2:5,u=i&&i.font&&i.font.size?i.font.size:16;if(o<=n/2&&s<=r/2)t.setAttribute("alignment-baseline","hanging"),s+=a;else if(o>=n/2&&s<=r/2)t.setAttribute("alignment-baseline","hanging"),t.setAttribute("text-anchor","end"),s+=a;else if(o<=n/2&&s>=r/2){var h=u*e.label.split(" ").length;t.setAttribute("alignment-baseline","baseline"),s=s-a-h}else{var c=u*e.label.split(" ").length;t.setAttribute("alignment-baseline","baseline"),t.setAttribute("text-anchor","end"),s=s-a-c}return this.convertText(t,e.label,o,s,i),{x:o,y:s}}},{key:"convertText",value:function(t,e,r,n,i){var o=i.label.font,s=e.split(" "),a=o.size,u=o.weight,h=o.family;s.map((function(e,n){var i=document.createElementNS("http://www.w3.org/2000/svg","tspan");i.setAttribute("x",r),0==n?i.setAttribute("dy","0.7em"):i.setAttribute("dy","1.2em"),i.setAttribute("font-weight",u),i.setAttribute("font-style",u),i.setAttribute("font-family",h);var o=document.createTextNode(e);i.appendChild(o),t.setAttribute("font-size",a),t.appendChild(i)}))}}],(r=null)&&T(e.prototype,r),n&&T(e,n),t}();function I(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}function P(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){I(o,n,i,s,a,"next",t)}function a(t){I(o,n,i,s,a,"throw",t)}s(void 0)}))}}var N=function(){this.set=function(){var t=P(regeneratorRuntime.mark((function t(e,r,n){var i,o,a,u,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.nodes,o=s.getSize(r,n.node,s.getNodesCnt(e),.25),a=0;case 3:if(!(a<i.length)){t.next=11;break}return u=i[a],h=C.updateStyles(u,n,o),t.next=8,this.draw(r,u,h);case 8:a++,t.next=3;break;case 11:case"end":return t.stop()}}),t,this)})));return function(e,r,n){return t.apply(this,arguments)}}(),this.draw=function(){var t=P(regeneratorRuntime.mark((function t(e,r,n){var i,o,a,u,h,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=s.getSVGDimensions(e).height,o=s.getSVGDimensions(e).width,a=document.createElementNS("http://www.w3.org/2000/svg","text"),u=C.updatePosition(a,r,i,o,n),h=u.x,c=u.y,l=n&&n.label&&n.label.color?n.label.color:"black",a.setAttributeNS(null,"x",h),a.setAttributeNS(null,"y",c),a.setAttributeNS(null,"fill",l),e.appendChild(a);case 11:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()};function z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var j=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"initExtensions",value:function(t){for(var e=t.getSupportedExtensions(),r={},n=1;n<arguments.length;n++){var i=arguments[n];(r[i]=e.indexOf(i)>=0)&&t.getExtension(i)}return r}},{key:"createShader",value:function(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)}},{key:"createTexture",value:function(t,e,r,n){var i=t.createTexture(),o=new Image,s=function(){o.onload=null,t.bindTexture(t.TEXTURE_2D,i),(n||{}).sdf?(t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.LUMINANCE,t.LUMINANCE,t.UNSIGNED_BYTE,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)):(t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),t.bindTexture(t.TEXTURE_2D,null),r&&r()};return o.onload=s,o.src=e,o.naturalWidth&&o.naturalHeight&&s(),i.image=o,i}},{key:"uniformColor",value:function(t,e,r){t.uniform4f(e,r.r,r.g,r.b,r.a)}},{key:"ortho",value:function(t,e,r,n,i,o){var s=1/(t-e),a=1/(r-n),u=1/(i-o),h=new Float32Array(16);return h[0]=-2*s,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*a,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*u,h[11]=0,h[12]=(t+e)*s,h[13]=(n+r)*a,h[14]=(o+i)*u,h[15]=1,h}}],(r=null)&&z(e.prototype,r),n&&z(e,n),t}();function V(t){for(var e={},r={},n=0;n<t.length;n++){var i=t[n],o=e[i.style]=e[i.style]||[];void 0===o.idx&&(o.idx=[]),o.idx.push(n),i.sI=r[i.style]=void 0===r[i.style]?0:r[i.style]+1,o.push(i)}return e}var D=function(t){var e,r,n,i,o,s,a,u,h;for(u=h=-(s=a=1/0),r=[],n=[],o=t.length,i=0;i<o;++i)(e=t[i]).x<s&&(s=e.x),e.y<a&&(a=e.y),e.x>u&&(u=e.x),e.y>h&&(h=e.y),r.push(e.x),n.push(e.y);var c=u-s,l=h-a;function f(t,e,r,n,i,o,s,a){if(t.leaf){var u=t.x,h=t.y;if(null!==u)if(u===r&&h===n)g(t,e,r,n,i,o,s,a);else{var c=t.point;t.x=t.y=t.point=null,g(t,c,u,h,i,o,s,a),g(t,e,r,n,i,o,s,a)}else t.x=r,t.y=n,t.point=e}else g(t,e,r,n,i,o,s,a)}function g(t,e,r,n,i,o,s,a){var u=.5*(i+s),h=.5*(o+a),c=r>=u,l=n>=h,g=l<<1|c;t.leaf=!1,c?i=u:s=u,l?o=h:a=h,f(t=t.nodes[g]||(t.nodes[g]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,r,n,i,o,s,a)}c>l?h=a+c:u=s+l;var d={leaf:!0,nodes:[],point:null,x:null,y:null};for(d.visit=function(t){return function t(e,r,n,i,o,s){if(!e(r,n,i,o,s)){var a=.5*(n+o),u=.5*(i+s),h=r.nodes;h[0]&&t(e,h[0],n,i,a,u),h[1]&&t(e,h[1],a,i,o,u),h[2]&&t(e,h[2],n,u,a,s),h[3]&&t(e,h[3],a,u,o,s)}}(t,d,s,a,u,h)},d.find=function(t,e){return function(t,e,r,n,i,o,s){var a,u=1/0;return function t(h,c,l,f,g){if(!(c>o||l>s||f<n||g<i)){var d;if(d=h.point){var v=e-h.x,m=r-h.y,p=v*v+m*m;if(p<u){var w=Math.sqrt(u=p);n=e-w,i=r-w,o=e+w,s=r+w,a=d}}for(var y=h.nodes,b=.5*(c+f),x=.5*(l+g),M=(r>=x)<<1|e>=b,_=M+4;M<_;++M)if(h=y[3&M])switch(3&M){case 0:t(h,c,l,b,x);break;case 1:t(h,b,l,f,x);break;case 2:t(h,c,x,b,g);break;case 3:t(h,b,x,f,g)}}}(t,n,i,o,s),a}(d,t,e,s,a,u,h)},i=0;i<o;i++)f(d,t[i],r[i],n[i],s,a,u,h);return--i,r=n=t=e=null,d},O=function(t,e,r){var n=r.edgeDistace||15,i=r.edgeStrength||1,o=r.friction||.9,s=r.charge||-30,a=r.gravity||.4,u=r.theta2||.64,h=r.size||[1,1],c=r.margin||.05,l=r.direction||"left-right",f=r.chargeDistance2||1/0;this._options={margin:c,direction:l};var g,d=[],v=[],m=[];function p(t){return function(e,r,n,i){if(e.point!==t){var o=e.cx-t.x,s=e.cy-t.y,a=i-r,h=o*o+s*s;if(a*a/u<h){if(h<f){var c=e.charge/h;t.px-=o*c,t.py-=s*c}return!0}if(e.point&&h&&h<f){var l=e.pointCharge/h;t.px-=o*l,t.py-=s*l}}return!e.charge}}function w(){if((g*=.99)<.05)return g=0,!0;for(var r,n,i,u,c,l,f,w,y=t.length,b=e.length,x=0;x<b;x++)i=(n=e[x]).source,(c=(f=(u=n.target).x-i.x)*f+(w=u.y-i.y)*w)&&(f*=c=g*v[x]*((c=Math.sqrt(c))-d[x])/c,w*=c,u.x-=f*(l=i.weight/(u.weight+i.weight)),u.y-=w*l,i.x+=f*(l=1-l),i.y+=w*l);if(l=g*a){f=h[0]/2,w=h[1]/2;for(var M=0;M<y;M++)(n=t[M]).x+=(f-n.x)*l,n.y+=(w-n.y)*l}if(s){!function t(e,r,n){var i=0,o=0;if(e.charge=0,!e.leaf)for(var s,a=e.nodes,u=a.length,h=0;h<u;h++)null!=(s=a[h])&&(t(s,r,n),e.charge+=s.charge,i+=s.charge*s.cx,o+=s.charge*s.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=r*n[e.point.index];e.charge+=e.pointCharge=c,i+=c*e.point.x,o+=c*e.point.y}e.cx=i/e.charge,e.cy=o/e.charge}(r=D(t),g,m);for(var _=0;_<y;_++){var k=t[_];!k.fixed&&r.visit(p(k))}}for(var E=function(t,e){return Math.random()*(e-t)+t},S=0;S<y;S++)(n=t[S]).fixed||n.fixed2?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*o,n.y-=(n.py-(n.py=n.y))*o,"undefined"!=typeof options&&void 0!==options.minX&&((n.x<options.minX||n.x>options.maxX)&&(n.x=E(options.minX,options.maxX)),(n.y<options.minY||n.y>options.maxY)&&(n.y=E(options.minY,options.maxY))))}this.apply=function(){for(var r=t.length,o=Math.sqrt(r),a=.3/o,u=0;u<r;u++){var h=t[u];h.weight=0,h.x=void 0!==h.x?h.x:a+u%o/o,h.y=void 0!==h.y?h.y:a+Math.floor(u/o)/o,h.px=h.x,h.py=h.y,m[u]=s}for(var c=0;c<e.length;c++){var l=e[c];l.source.weight++,l.target.weight++,d[c]=n,v[c]=i}for(g=.1;!w(););return this._options}};function q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var U=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"extend",value:function(t){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])t[r]=arguments[e][r];return t}},{key:"isObject",value:function(t){return t===Object(t)}},{key:"emptyObject",value:function(e){if(!t.isObject(e))return!1;for(var r in e)return!1;return!0}},{key:"ajax",value:function(t,e,r){var n,i;(n=new XMLHttpRequest).onreadystatechange=(i=e,function(){4==n.readyState&&200==n.status&&i("arraybuffer"==r?n.response:n.responseText)}),r&&(n.responseType=r),n.open("GET",t,!0),n.send()}}],(r=null)&&q(e.prototype,r),n&&q(e,n),t}();function L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var X=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nodes=e;var n={margin:.05,direction:"left-right"};U.extend(n,r),this._options=n}var e,r,n;return e=t,(r=[{key:"apply",value:function(){for(var t=0,e=this._nodes.length;t<e;t++){var r=this._nodes[t];r.x=Math.random(),r.y=Math.random()}return this._options}}])&&L(e.prototype,r),n&&L(e,n),t}();function G(t){return function(t){if(Array.isArray(t))return H(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Y(t,e){return G(Array(t).keys()).map((function(t){return Array(e).fill(0)}))}function $(t,e){var r=Array(t.length).fill(0);e.forEach((function(t){r[t.source.index]+=1,r[t.target.index]+=1}));var n=r.map((function(t,e){return{index:e,value:t}}));n.sort((function(t,e){return+(t.value<e.value)||+(t.value===e.value)-1}));var i=n.map((function(t){return r[t.index]}));return{nodes:n,degrees:i}}function F(t){var e=0;return t.children&&t.children.forEach((function(t){if(1==t.depth_visited)throw new Error("This layout is only for trees acyclic graphs");t.depth_visited=!0;var r=F(t);r>e&&(e=r)})),1+e}function W(t){if((t=Math.abs(t))<=1)return{start:.5,step:1};return{start:.05,step:.9/(t-1)}}function B(t,e){if("right-left"==e)for(var r=0;r<t.length;++r)t[r].x=1-t[r].x;else if("top-down"==e)for(var n=0;n<t.length;++n){var i=1-t[n].x;t[n].x=t[n].y,t[n].y=i}else if("bottom-up"==e)for(var o=0;o<t.length;++o){var s=t[o].x;t[o].x=t[o].y,t[o].y=s}else if("left-right"!=e)throw new Error("directions can be only 'left-right' (default), 'right-left', 'top-down' or 'bottom-up'")}function K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function J(t,e){for(var r=t.children,n=0;n<r.length;++n)if(r[n].uniqid===e.uniqid)return!0;return!1}var Z=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};K(this,t),this._nodes=e,this._edges=r;var i=.05,o=[.5,.5],s={margin:.05,direction:"left-right",ordering:"degree",angle_step:2*Math.PI/e.length,starting_angle:0,center:o,radius:Math.max.apply(null,o)-i,angle_ratio:1,radius_ratio:1,divisions:1};U.extend(s,n),this._options=s}var e,r,n;return e=t,(r=[{key:"apply",value:function(){var t=$(this._nodes,this._edges),e=this._options.starting_angle,r=this._options.angle_step*this._options.angle_ratio,n=this._options.center,i=this._options.radius,o=this._options.radius_ratio*this._options.radius,s=this._options.divisions,a=this._nodes.length;if("topological"==this._options.ordering){!function(t,e){t.forEach((function(t,e){t.parents=[],t.children=[],t.visited=!1})),e.forEach((function(t,e){t.source.children.push(t.target),t.target.parents.push(t.source)}))}(this._nodes,this._edges);for(var u=this,h=t.nodes.map((function(t){return u._nodes[t.index]})),c=function(t,e){var r=[e[0]];e[0].picked=!0;for(var n=1;n<t.nodes.length;++n)e[n].degree=t.degrees[n];for(var i=0,o=1;o<e.length;++o){var s=e[o].degree;if(o!==e.length-1&&s===e[o+1].degree&&!J(r[i],e[o])||1==e[o].picked){for(var a=r[i].children,u=!1,h=0;h<a.length;++h)if(a[h].degree===s&&!0!==a[h].picked){r.push(a[h]),a[h].picked=!0,u=!0;break}for(var c=0;!0!==u&&(!0!==e[c].picked&&(r.push(e[c]),e[c].picked=!0,u=!0),++c!==e.length););}else r.push(e[o]),e[o].picked=!0,i++}return r}(t,h),l=0;l<a;++l){var f=i+l*(o-i)/(a-1),g=e+Math.floor(l/s)*r+2*Math.PI/s*(l%s);void 0!==c[l]&&(c[l].x=n[0]+Math.cos(g)*f,c[l].y=n[1]+Math.sin(g)*f,c[l].weight=c[l].degree)}}else for(var d=0;d<a;++d){var v=i+d*(o-i)/(a-1),m=e+Math.floor(d/s)*r+2*Math.PI/s*(d%s);this._nodes[t.nodes[d].index].x=n[0]+Math.cos(m)*v,this._nodes[t.nodes[d].index].y=n[1]+Math.sin(m)*v,this._nodes[t.nodes[d].index].weight=t.degrees[d]}return this._options}}])&&Q(e.prototype,r),n&&Q(e,n),t}();function tt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var et=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nodes=e,this._edges=r;var i={margin:.05,direction:"left-right"};U.extend(i,n),this._options=i}var e,r,n;return e=t,(r=[{key:"drawTreeCentered",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.centered=!0,t.depth_visited=!1;for(var n=0,i=0;i<t.children.length;i++){var o=t.children[i];1!=o.centered&&(n+=this.drawTreeCentered(o,n+e,r+1))}return 0==t.children&&n++,t.y=this.stepy*(e+(n-1)/2)+this.alphay,t.x=(r-1)*this.stepx+this.alphax,n}},{key:"apply",value:function(){var t=this._nodes;t.forEach((function(t,e){t.parents=[],t.children=[],t.centered=!1})),this._edges.forEach((function(t,e){t.source.children.push(t.target),t.target.parents.push(t.source)}));for(var e=0;e<t.length;e++)if(0==t[e].parents.length){var r=t[e];break}var n=W(F(r));this.alphax=n.start,this.stepx=n.step;var i=0;return t.forEach((function(t){0==t.children.length&&i++})),n=W(i),this.alphay=n.start,this.stepy=n.step,this.drawTreeCentered(r),B(this._nodes,this._options.direction),this._options}}])&&tt(e.prototype,r),n&&tt(e,n),t}();function rt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var nt=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nodes=e,this._edges=r;var i={margin:.05,direction:"left-right"};U.extend(i,n),this._options=i}var e,r,n;return e=t,(r=[{key:"drawTreeTop",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t.visited=!0,t.depth_visited=!1,t.x=this.alphax+this.stepx*(r-1),t.y=1-(this.alphay+this.stepy*e);for(var n=0,i=0;i<t.children.length;i++){var o=t.children[i];1!=o.centered&&(n+=this.drawTreeTop(o,n+e,r+1))}return 0==t.children.length&&n++,n}},{key:"apply",value:function(){var t=this._nodes;t.forEach((function(t,e){t.parents=[],t.children=[],t.centered=!1})),this._edges.forEach((function(t,e){t.source.children.push(t.target),t.target.parents.push(t.source)}));for(var e=0;e<t.length;e++)if(0==t[e].parents.length){var r=t[e];break}var n=W(F(r));this.alphax=n.start,this.stepx=n.step;var i=0;return t.forEach((function(t){0==t.children.length&&i++})),n=W(i),this.alphay=n.start,this.stepy=n.step,this.drawTreeTop(r),B(this._nodes,this._options.direction),this._options}}])&&rt(e.prototype,r),n&&rt(e,n),t}();function it(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ot=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nodes=e,this._edges=r;var i={margin:.05,direction:"left-right",roots:"auto"};U.extend(i,n),this._options=i}var e,r,n;return e=t,(r=[{key:"makeLayers",value:function(t,e){if(t.length>1)for(var r=1/(t.length-1),n=0;n<t.length;++n)t[n].visited=!0,t[n].layer=e,t[n].y=n*r;else t[0].visited=!0,t[0].layer=e,t[0].y=.5;for(var i=[],o=0;o<t.length;o++)for(var s=t[o].parents.concat(t[o].children),a=0;a<s.length;a++)0!=s[a].visited||i.includes(s[a])||i.push(s[a]);return 0==i.length?e:this.makeLayers(i,e+1)}},{key:"apply",value:function(){var t=this._nodes;t.forEach((function(t,e){t.parents=[],t.children=[],t.visited=!1})),this._edges.forEach((function(t,e){t.source.children.push(t.target),t.target.parents.push(t.source)}));for(var e=function(t,e){var r=[];if("user-defined"==e||"auto"==e)for(var n=0;n<t.length;n++)1==t[n].isroot&&r.push(t[n]);if(("no-in-degree"==e||"auto"==e&&0==r.length)&&0==r.length)for(var i=0;i<t.length;i++)0==t[i].parents.length&&r.push(t[i]);if("degree"==e||"auto"==e&&0==r.length){var o=0;t.forEach((function(t){t.children.length>o&&(o=t.children.length)})),t.forEach((function(t){t.children.length==o&&r.push(t)}))}return r}(t,this._options.roots),r=1/(this.makeLayers(e,1)-1),n=0;n<this._nodes.length;++n)this._nodes[n].x=r*(this._nodes[n].layer-1);return this._options}}])&&it(e.prototype,r),n&&it(e,n),t}();function st(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function at(t){for(var e=!0,r=0;r<t.parents.length;++r){t.parents[r]!=t&&(e=!1)}for(var n=0;n<t.children.length;++n){t.children[n]!=t&&(e=!1)}return e}var ut=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nodes=e,this._edges=r,this.components={current_component:0,depth:1},this.unvisited=e;var i={margin:.05,direction:"left-right",roots:"auto"};U.extend(i,n),this._options=i}var e,r,n;return e=t,(r=[{key:"initHierarchy",value:function(){this._nodes.forEach((function(t,e){t.parents=[],t.children=[],t.visited=!1})),this._edges.forEach((function(t,e){t.source.children.push(t.target),t.target.parents.push(t.source)}))}},{key:"separateOrphans",value:function(){for(var t=[],e=[],r=0;r<this._nodes.length;++r){var n=this._nodes[r];at(n)?t.push(n):e.push(n)}return t}},{key:"placeOrphans",value:function(t,e){for(var r=1/(t.length-1),n=0;n<t.length;++n)t[n].y=n*r,t[n].x=e+1;return t.length>0?e+1:e}},{key:"unvisitedNodes",value:function(){var t=[],e=this.orphans;this.unvisited.forEach((function(r){0!=r.visited||r in e||t.push(r)})),t.length!=this.unvisited?(this.maybe_more=!0,this.unvisited=t):this.maybe_more=!1}},{key:"placeAdditional",value:function(){for(var t=this.components[this.components.current_component].layers,e=0;e<this.unvisited.length;++e){for(var r=this.unvisited[e],n=this.components.depth,i=!1,o=0;o<r.children.length;++o){var s=r.children[o];if(1==s.visited){i=!0,s.layer<=n&&(n=s.layer);break}}if(i)r.visited=!0,n-0 in t||(t[n-0]=[]),t[n-0].push(r);else{for(var a=max_layer,u=!1,h=0;h<r.parents.length;++h){var c=r.parents[h];1==c.visited&&(u=!0,c.layer<=a&&(a=c.layer))}u&&(r.visited=!0,r.x=a+0,a+0 in t||(t[a+0]=[]),t[a+0].push(r))}}}},{key:"initializeComponent",value:function(t){this.components[t]={},this.components[t].max_nodes_layer=0,this.components[t].index_offset=t>0?this.components[t-1].vertical_nodes:0,this.components[t].current_layer=1,this.components[t].layers={},this.components[t].vertical_nodes=0}},{key:"layerNodes",value:function(t){this.components.current_component in this.components||this.initializeComponent(this.components.current_component);var e=this.components[this.components.current_component];t.length>e.vertical_nodes&&(e.vertical_nodes=t.length),e.layers[e.current_layer]=[];for(var r=0;r<t.length;++r)t[r].visited=!0,e.layers[e.current_layer].push(t[r]);for(var n=[],i=0;i<t.length;i++)for(var o=t[i].children,s=0;s<o.length;s++)0!=o[s].visited||n.includes(o[s])||n.push(o[s]);n.length>0&&(e.current_layer++,this.components.depth<e.current_layer&&(this.components.depth=e.current_layer),this.layerNodes(n))}},{key:"apply",value:function(){for(this.initHierarchy(),this.orphans=this.separateOrphans(),this.unvisitedNodes();this.unvisited.length>0;){var t=ht(this.unvisited,"auto");for(this.layerNodes(t),this.unvisitedNodes(),this.maybe_mode=!0;this.maybe_more;)this.placeAdditional(),this.unvisitedNodes();this.components.current_component++}this.components.vertical_nodes=0;for(var e=0;e<this.components.current_component;e++)this.components.vertical_nodes+=this.components[e].vertical_nodes;for(var r=1/this.components.depth,n=1/this.components.vertical_nodes,i=0;i<this.components.current_component;i++){var o=this.components[i];for(var s in o.layers){var a=o.layers[s];if(1==a.length){var u=a[0];u.x=r*s,u.y=n*(o.index_offset+o.vertical_nodes/2)}else for(var h=0;h<a.length;++h){var c=a[h];c.x=r*s,c.y=n*(o.index_offset+h)}}}return this.placeOrphans(this.orphans,0),this._options}}])&&st(e.prototype,r),n&&st(e,n),t}();function ht(t,e){var r=[];if("user-defined"==e||"auto"==e)for(var n=0;n<t.length;n++)1==t[n].isroot&&r.push(t[n]);if(("no-in-degree"==e||"auto"==e&&0==r.length)&&0==r.length)for(var i=0;i<t.length;i++)0==t[i].parents.length&&r.push(t[i]);if("degree"==e||"auto"==e&&0==r.length){var o=0;t.forEach((function(t){t.children.length>o&&(o=t.children.length)})),t.forEach((function(t){t.children.length==o&&r.push(t)}))}return r}var ct=r(0),lt=r.n(ct);var ft=function(t){if(!lt()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var e=t[0],r=1;r<t.length;r++)t[r]>e&&(e=t[r]);return e};var gt=function(t){if(!lt()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");for(var e=t[0],r=1;r<t.length;r++)t[r]<e&&(e=t[r]);return e};var dt=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!lt()(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==r.output){if(!lt()(r.output))throw new TypeError("output option must be an array if specified");e=r.output}else e=new Array(t.length);var n=gt(t),i=ft(t);if(n===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var o=r.min,s=void 0===o?r.autoMinMax?n:0:o,a=r.max,u=void 0===a?r.autoMinMax?i:1:a;if(s>=u)throw new RangeError("min option must be smaller than max option");for(var h=(u-s)/(i-n),c=0;c<t.length;c++)e[c]=(t[c]-n)*h+s;return e};class vt{constructor(t){var e,r,n,i,o,s,a,u,h,c=(t=Ut.checkMatrix(t)).clone(),l=c.rows,f=c.columns,g=new Array(l),d=1;for(e=0;e<l;e++)g[e]=e;for(u=new Array(l),r=0;r<f;r++){for(e=0;e<l;e++)u[e]=c.get(e,r);for(e=0;e<l;e++){for(h=Math.min(e,r),o=0,n=0;n<h;n++)o+=c.get(e,n)*u[n];u[e]-=o,c.set(e,r,u[e])}for(i=r,e=r+1;e<l;e++)Math.abs(u[e])>Math.abs(u[i])&&(i=e);if(i!==r){for(n=0;n<f;n++)s=c.get(i,n),c.set(i,n,c.get(r,n)),c.set(r,n,s);a=g[i],g[i]=g[r],g[r]=a,d=-d}if(r<l&&0!==c.get(r,r))for(e=r+1;e<l;e++)c.set(e,r,c.get(e,r)/c.get(r,r))}this.LU=c,this.pivotVector=g,this.pivotSign=d}isSingular(){for(var t=this.LU,e=t.columns,r=0;r<e;r++)if(0===t[r][r])return!0;return!1}solve(t){t=qt.checkMatrix(t);var e=this.LU;if(e.rows!==t.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var r,n,i,o=t.columns,s=t.subMatrixRow(this.pivotVector,0,o-1),a=e.columns;for(i=0;i<a;i++)for(r=i+1;r<a;r++)for(n=0;n<o;n++)s[r][n]-=s[i][n]*e[r][i];for(i=a-1;i>=0;i--){for(n=0;n<o;n++)s[i][n]/=e[i][i];for(r=0;r<i;r++)for(n=0;n<o;n++)s[r][n]-=s[i][n]*e[r][i]}return s}get determinant(){var t=this.LU;if(!t.isSquare())throw new Error("Matrix must be square");for(var e=this.pivotSign,r=t.columns,n=0;n<r;n++)e*=t[n][n];return e}get lowerTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new qt(e,r),i=0;i<e;i++)for(var o=0;o<r;o++)n[i][o]=i>o?t[i][o]:i===o?1:0;return n}get upperTriangularMatrix(){for(var t=this.LU,e=t.rows,r=t.columns,n=new qt(e,r),i=0;i<e;i++)for(var o=0;o<r;o++)n[i][o]=i<=o?t[i][o]:0;return n}get pivotPermutationVector(){return this.pivotVector.slice()}}function mt(t,e){var r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}function pt(t,e,r){for(var n=new Array(t),i=0;i<t;i++){n[i]=new Array(e);for(var o=0;o<e;o++)n[i][o]=r}return n}class wt{constructor(t,e={}){var r=(t=Ut.checkMatrix(t)).rows,n=t.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:s=!1}=e;var a,u=Boolean(i),h=Boolean(o),c=!1;if(r<n)if(s){r=(a=t.transpose()).rows,n=a.columns,c=!0;var l=u;u=h,h=l}else a=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else a=t.clone();var f=Math.min(r,n),g=Math.min(r+1,n),d=new Array(g),v=pt(r,f,0),m=pt(n,n,0),p=new Array(n),w=new Array(r),y=new Array(g);for(let t=0;t<g;t++)y[t]=t;var b=Math.min(r-1,n),x=Math.max(0,Math.min(n-2,r)),M=Math.max(b,x);for(let t=0;t<M;t++){if(t<b){d[t]=0;for(let e=t;e<r;e++)d[t]=mt(d[t],a[e][t]);if(0!==d[t]){a[t][t]<0&&(d[t]=-d[t]);for(let e=t;e<r;e++)a[e][t]/=d[t];a[t][t]+=1}d[t]=-d[t]}for(let e=t+1;e<n;e++){if(t<b&&0!==d[t]){let n=0;for(let i=t;i<r;i++)n+=a[i][t]*a[i][e];n=-n/a[t][t];for(let i=t;i<r;i++)a[i][e]+=n*a[i][t]}p[e]=a[t][e]}if(u&&t<b)for(let e=t;e<r;e++)v[e][t]=a[e][t];if(t<x){p[t]=0;for(let e=t+1;e<n;e++)p[t]=mt(p[t],p[e]);if(0!==p[t]){p[t+1]<0&&(p[t]=0-p[t]);for(let e=t+1;e<n;e++)p[e]/=p[t];p[t+1]+=1}if(p[t]=-p[t],t+1<r&&0!==p[t]){for(let e=t+1;e<r;e++)w[e]=0;for(let e=t+1;e<r;e++)for(let r=t+1;r<n;r++)w[e]+=p[r]*a[e][r];for(let e=t+1;e<n;e++){let n=-p[e]/p[t+1];for(let i=t+1;i<r;i++)a[i][e]+=n*w[i]}}if(h)for(let e=t+1;e<n;e++)m[e][t]=p[e]}}let _=Math.min(n,r+1);if(b<n&&(d[b]=a[b][b]),r<_&&(d[_-1]=0),x+1<_&&(p[x]=a[x][_-1]),p[_-1]=0,u){for(let t=b;t<f;t++){for(let e=0;e<r;e++)v[e][t]=0;v[t][t]=1}for(let t=b-1;t>=0;t--)if(0!==d[t]){for(let e=t+1;e<f;e++){let n=0;for(let i=t;i<r;i++)n+=v[i][t]*v[i][e];n=-n/v[t][t];for(let i=t;i<r;i++)v[i][e]+=n*v[i][t]}for(let e=t;e<r;e++)v[e][t]=-v[e][t];v[t][t]=1+v[t][t];for(let e=0;e<t-1;e++)v[e][t]=0}else{for(let e=0;e<r;e++)v[e][t]=0;v[t][t]=1}}if(h)for(let t=n-1;t>=0;t--){if(t<x&&0!==p[t])for(let e=t+1;e<n;e++){let r=0;for(let i=t+1;i<n;i++)r+=m[i][t]*m[i][e];r=-r/m[t+1][t];for(let i=t+1;i<n;i++)m[i][e]+=r*m[i][t]}for(let e=0;e<n;e++)m[e][t]=0;m[t][t]=1}for(var k=_-1,E=Number.EPSILON;_>0;){let t,e;for(t=_-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+E*Math.abs(d[t]+Math.abs(d[t+1]));if(Math.abs(p[t])<=e||Number.isNaN(p[t])){p[t]=0;break}}if(t===_-2)e=4;else{let r;for(r=_-1;r>=t&&r!==t;r--){let e=(r!==_?Math.abs(p[r]):0)+(r!==t+1?Math.abs(p[r-1]):0);if(Math.abs(d[r])<=E*e){d[r]=0;break}}r===t?e=3:r===_-1?e=1:(e=2,t=r)}switch(t++,e){case 1:{let e=p[_-2];p[_-2]=0;for(let r=_-2;r>=t;r--){let i=mt(d[r],e),o=d[r]/i,s=e/i;if(d[r]=i,r!==t&&(e=-s*p[r-1],p[r-1]=o*p[r-1]),h)for(let t=0;t<n;t++)i=o*m[t][r]+s*m[t][_-1],m[t][_-1]=-s*m[t][r]+o*m[t][_-1],m[t][r]=i}break}case 2:{let e=p[t-1];p[t-1]=0;for(let n=t;n<_;n++){let i=mt(d[n],e),o=d[n]/i,s=e/i;if(d[n]=i,e=-s*p[n],p[n]=o*p[n],u)for(let e=0;e<r;e++)i=o*v[e][n]+s*v[e][t-1],v[e][t-1]=-s*v[e][n]+o*v[e][t-1],v[e][n]=i}break}case 3:{const e=Math.max(Math.abs(d[_-1]),Math.abs(d[_-2]),Math.abs(p[_-2]),Math.abs(d[t]),Math.abs(p[t])),i=d[_-1]/e,o=d[_-2]/e,s=p[_-2]/e,a=d[t]/e,c=p[t]/e,l=((o+i)*(o-i)+s*s)/2,f=i*s*(i*s);let g=0;0===l&&0===f||(g=l<0?0-Math.sqrt(l*l+f):Math.sqrt(l*l+f),g=f/(l+g));let w=(a+i)*(a-i)+g,y=a*c;for(let e=t;e<_-1;e++){let i=mt(w,y);0===i&&(i=Number.MIN_VALUE);let o=w/i,s=y/i;if(e!==t&&(p[e-1]=i),w=o*d[e]+s*p[e],p[e]=o*p[e]-s*d[e],y=s*d[e+1],d[e+1]=o*d[e+1],h)for(let t=0;t<n;t++)i=o*m[t][e]+s*m[t][e+1],m[t][e+1]=-s*m[t][e]+o*m[t][e+1],m[t][e]=i;if(i=mt(w,y),0===i&&(i=Number.MIN_VALUE),o=w/i,s=y/i,d[e]=i,w=o*p[e]+s*d[e+1],d[e+1]=-s*p[e]+o*d[e+1],y=s*p[e+1],p[e+1]=o*p[e+1],u&&e<r-1)for(let t=0;t<r;t++)i=o*v[t][e]+s*v[t][e+1],v[t][e+1]=-s*v[t][e]+o*v[t][e+1],v[t][e]=i}p[_-2]=w,1;break}case 4:if(d[t]<=0&&(d[t]=d[t]<0?-d[t]:0,h))for(let e=0;e<=k;e++)m[e][t]=-m[e][t];for(;t<k&&!(d[t]>=d[t+1]);){let e=d[t];if(d[t]=d[t+1],d[t+1]=e,h&&t<n-1)for(let r=0;r<n;r++)e=m[r][t+1],m[r][t+1]=m[r][t],m[r][t]=e;if(u&&t<r-1)for(let n=0;n<r;n++)e=v[n][t+1],v[n][t+1]=v[n][t],v[n][t]=e;t++}0,_--}}if(c){var S=m;m=v,v=S}this.m=r,this.n=n,this.s=d,this.U=v,this.V=m}solve(t){var e=t,r=this.threshold,n=this.s.length,i=qt.zeros(n,n);for(let t=0;t<n;t++)Math.abs(this.s[t])<=r?i[t][t]=0:i[t][t]=1/this.s[t];var o=this.U,s=this.rightSingularVectors,a=s.mmul(i),u=s.rows,h=o.length,c=qt.zeros(u,h);for(let t=0;t<u;t++)for(let e=0;e<h;e++){let r=0;for(let i=0;i<n;i++)r+=a[t][i]*o[e][i];c[t][e]=r}return c.mmul(e)}solveForDiagonal(t){return this.solve(qt.diag(t))}inverse(){var t=this.V,e=this.threshold,r=t.length,n=t[0].length,i=new qt(r,this.s.length);for(let o=0;o<r;o++)for(let r=0;r<n;r++)Math.abs(this.s[r])>e?i[o][r]=t[o][r]/this.s[r]:i[o][r]=0;var o=this.U,s=o.length,a=o[0].length,u=new qt(r,s);for(let t=0;t<r;t++)for(let e=0;e<s;e++){let r=0;for(let n=0;n<a;n++)r+=i[t][n]*o[e][n];u[t][e]=r}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s,n=0,i=r.length;n<i;n++)r[n]>t&&e++;return e}get diagonal(){return this.s}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return qt.isMatrix(this.U)||(this.U=new qt(this.U)),this.U}get rightSingularVectors(){return qt.isMatrix(this.V)||(this.V=new qt(this.V)),this.V}get diagonalMatrix(){return qt.diag(this.s)}}function yt(t,e,r){var n=r?t.rows:t.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function bt(t,e,r){var n=r?t.columns:t.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function xt(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function Mt(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function _t(t,e,r){return{row:kt(t,e),column:Et(t,r)}}function kt(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for row indices");if(e.some(e=>e<0||e>=t.rows))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function Et(t,e){if("object"!=typeof e)throw new TypeError("unexpected type for column indices");if(e.some(e=>e<0||e>=t.columns))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function St(t,e,r,n,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(At("startRow",e),At("endRow",r),At("startColumn",n),At("endColumn",i),e>r||n>i||e<0||e>=t.rows||r<0||r>=t.rows||n<0||n>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function At(t,e){if("number"!=typeof e)throw new TypeError(t+" must be a number")}class Rt extends(Ot()){constructor(t,e,r){super(),this.matrix=t,this.rows=e,this.columns=r}static get[Symbol.species](){return qt}}class Tt extends Rt{constructor(t){super(t,t.columns,t.rows)}set(t,e,r){return this.matrix.set(e,t,r),this}get(t,e){return this.matrix.get(e,t)}}class Ct extends Rt{constructor(t,e){super(t,1,t.columns),this.row=e}set(t,e,r){return this.matrix.set(this.row,e,r),this}get(t,e){return this.matrix.get(this.row,e)}}class It extends Rt{constructor(t,e,r,n,i){St(t,e,r,n,i),super(t,r-e+1,i-n+1),this.startRow=e,this.startColumn=n}set(t,e,r){return this.matrix.set(this.startRow+t,this.startColumn+e,r),this}get(t,e){return this.matrix.get(this.startRow+t,this.startColumn+e)}}class Pt extends Rt{constructor(t,e,r){var n=_t(t,e,r);super(t,n.row.length,n.column.length),this.rowIndices=n.row,this.columnIndices=n.column}set(t,e,r){return this.matrix.set(this.rowIndices[t],this.columnIndices[e],r),this}get(t,e){return this.matrix.get(this.rowIndices[t],this.columnIndices[e])}}class Nt extends Rt{constructor(t,e){super(t,(e=kt(t,e)).length,t.columns),this.rowIndices=e}set(t,e,r){return this.matrix.set(this.rowIndices[t],e,r),this}get(t,e){return this.matrix.get(this.rowIndices[t],e)}}class zt extends Rt{constructor(t,e){e=Et(t,e),super(t,t.rows,e.length),this.columnIndices=e}set(t,e,r){return this.matrix.set(t,this.columnIndices[e],r),this}get(t,e){return this.matrix.get(t,this.columnIndices[e])}}class jt extends Rt{constructor(t,e){super(t,t.rows,1),this.column=e}set(t,e,r){return this.matrix.set(t,this.column,r),this}get(t){return this.matrix.get(t,this.column)}}class Vt extends Rt{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(this.rows-t-1,e,r),this}get(t,e){return this.matrix.get(this.rows-t-1,e)}}class Dt extends Rt{constructor(t){super(t,t.rows,t.columns)}set(t,e,r){return this.matrix.set(t,this.columns-e-1,r),this}get(t,e){return this.matrix.get(t,this.columns-e-1)}}function Ot(t){void 0===t&&(t=Object);class e extends t{static get[Symbol.species](){return this}static from1DArray(t,e,r){if(t*e!==r.length)throw new RangeError("Data length does not match given dimensions");for(var n=new this(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r[i*e+o]);return n}static rowVector(t){for(var e=new this(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}static columnVector(t){for(var e=new this(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}static empty(t,e){return new this(t,e)}static zeros(t,e){return this.empty(t,e).fill(0)}static ones(t,e){return this.empty(t,e).fill(1)}static rand(t,e,r){void 0===r&&(r=Math.random);for(var n=this.empty(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r());return n}static randInt(t,e,r,n){void 0===r&&(r=1e3),void 0===n&&(n=Math.random);for(var i=this.empty(t,e),o=0;o<t;o++)for(var s=0;s<e;s++){var a=Math.floor(n()*r);i.set(o,s,a)}return i}static eye(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);for(var n=Math.min(t,e),i=this.zeros(t,e),o=0;o<n;o++)i.set(o,o,r);return i}static diag(t,e,r){var n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);for(var i=Math.min(n,e,r),o=this.zeros(e,r),s=0;s<i;s++)o.set(s,s,t[s]);return o}static min(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,Math.min(t.get(o,s),e.get(o,s)));return i}static max(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var s=0;s<n;s++)i.set(o,s,Math.max(t.get(o,s),e.get(o,s)));return i}static checkMatrix(t){return e.isMatrix(t)?t:new this(t)}static isMatrix(t){return null!=t&&"Matrix"===t.klass}get size(){return this.rows*this.columns}apply(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=this.rows,r=this.columns,n=0;n<e;n++)for(var i=0;i<r;i++)t.call(this,n,i);return this}to1DArray(){for(var t=new Array(this.size),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t[e*this.columns+r]=this.get(e,r);return t}to2DArray(){for(var t=new Array(this.rows),e=0;e<this.rows;e++){t[e]=new Array(this.columns);for(var r=0;r<this.columns;r++)t[e][r]=this.get(e,r)}return t}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isSymmetric(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}isEchelonForm(){let t=0,e=0,r=-1,n=!0,i=!1;for(;t<this.rows&&n;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(i=!0,r=e):(n=!1,i=!0);t++}return n}isReducedEchelonForm(){let t=0,e=0,r=-1,n=!0,i=!1;for(;t<this.rows&&n;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(i=!0,r=e):(n=!1,i=!0);for(let r=e+1;r<this.rows;r++)0!==this.get(t,r)&&(n=!1);t++}return n}set(t,e,r){throw new Error("set method is unimplemented")}get(t,e){throw new Error("get method is unimplemented")}repeat(t,e){t=t||1,e=e||1;for(var r=new this.constructor[Symbol.species](this.rows*t,this.columns*e),n=0;n<t;n++)for(var i=0;i<e;i++)r.setSubMatrix(this,this.rows*n,this.columns*i);return r}fill(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}neg(){return this.mulS(-1)}getRow(t){yt(this,t);for(var e=new Array(this.columns),r=0;r<this.columns;r++)e[r]=this.get(t,r);return e}getRowVector(t){return this.constructor.rowVector(this.getRow(t))}setRow(t,e){yt(this,t),e=xt(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}swapRows(t,e){yt(this,t),yt(this,e);for(var r=0;r<this.columns;r++){var n=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,n)}return this}getColumn(t){bt(this,t);for(var e=new Array(this.rows),r=0;r<this.rows;r++)e[r]=this.get(r,t);return e}getColumnVector(t){return this.constructor.columnVector(this.getColumn(t))}setColumn(t,e){bt(this,t),e=Mt(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}swapColumns(t,e){bt(this,t),bt(this,e);for(var r=0;r<this.rows;r++){var n=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,n)}return this}addRowVector(t){t=xt(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}subRowVector(t){t=xt(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}mulRowVector(t){t=xt(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}divRowVector(t){t=xt(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}addColumnVector(t){t=Mt(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}subColumnVector(t){t=Mt(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}mulColumnVector(t){t=Mt(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}divColumnVector(t){t=Mt(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}mulRow(t,e){yt(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}mulColumn(t,e){bt(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}max(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}maxIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}min(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}minIndex(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}maxRow(t){yt(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}maxRowIndex(t){yt(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}minRow(t){yt(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}minRowIndex(t){yt(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}maxColumn(t){bt(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}maxColumnIndex(t){bt(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}minColumn(t){bt(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}minColumnIndex(t){bt(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}diag(){for(var t=Math.min(this.rows,this.columns),e=new Array(t),r=0;r<t;r++)e[r]=this.get(r,r);return e}sum(t){switch(t){case"row":return function(t){for(var e=qt.zeros(t.rows,1),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e.set(r,0,e.get(r,0)+t.get(r,n));return e}(this);case"column":return function(t){for(var e=qt.zeros(1,t.columns),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e.set(0,n,e.get(0,n)+t.get(r,n));return e}(this);default:return function(t){for(var e=0,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e+=t.get(r,n);return e}(this)}}mean(){return this.sum()/this.size}prod(){for(var t=1,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t*=this.get(e,r);return t}norm(t="frobenius"){var e=0;if("max"===t)return this.max();if("frobenius"===t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)e+=this.get(r,n)*this.get(r,n);return Math.sqrt(e)}throw new RangeError("unknown norm type: "+t)}cumulativeSum(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}dot(t){e.isMatrix(t)&&(t=t.to1DArray());var r=this.to1DArray();if(r.length!==t.length)throw new RangeError("vectors do not have the same size");for(var n=0,i=0;i<r.length;i++)n+=r[i]*t[i];return n}mmul(t){t=this.constructor.checkMatrix(t),this.columns!==t.rows&&console.warn("Number of columns of left matrix are not equal to number of rows of right matrix.");for(var e=this.rows,r=this.columns,n=t.columns,i=new this.constructor[Symbol.species](e,n),o=new Array(r),s=0;s<n;s++){for(var a=0;a<r;a++)o[a]=t.get(a,s);for(var u=0;u<e;u++){var h=0;for(a=0;a<r;a++)h+=this.get(u,a)*o[a];i.set(u,s,h)}}return i}strassen2x2(t){var e=new this.constructor[Symbol.species](2,2);const r=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),s=this.get(1,0),a=t.get(1,0),u=this.get(1,1),h=t.get(1,1),c=(r+u)*(n+h),l=(s+u)*n,f=r*(o-h),g=u*(a-n),d=(r+i)*h,v=c+g-d+(i-u)*(a+h),m=f+d,p=l+g,w=c-l+f+(s-r)*(n+o);return e.set(0,0,v),e.set(0,1,m),e.set(1,0,p),e.set(1,1,w),e}strassen3x3(t){var e=new this.constructor[Symbol.species](3,3);const r=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),s=this.get(1,1),a=this.get(1,2),u=this.get(2,0),h=this.get(2,1),c=this.get(2,2),l=t.get(0,0),f=t.get(0,1),g=t.get(0,2),d=t.get(1,0),v=t.get(1,1),m=t.get(1,2),p=t.get(2,0),w=t.get(2,1),y=t.get(2,2),b=(r-o)*(-f+v),x=(-r+o+s)*(l-f+v),M=(o+s)*(-l+f),_=r*l,k=(-r+u+h)*(l-g+m),E=(-r+u)*(g-m),S=(u+h)*(-l+g),A=(-i+h+c)*(v+p-w),R=(i-c)*(v-w),T=i*p,C=(h+c)*(-p+w),I=(-i+s+a)*(m+p-y),P=(i-a)*(m-y),N=(s+a)*(-p+y),z=_+T+n*d,j=(r+n+i-o-s-h-c)*v+x+M+_+A+T+C,V=_+k+S+(r+n+i-s-a-u-h)*m+T+I+N,D=b+s*(-l+f+d-v-m-p+y)+x+_+T+I+P,O=b+x+M+_+a*w,q=T+I+P+N+o*g,U=_+k+E+h*(-l+g+d-v-m-p+w)+A+R+T,L=A+R+T+C+u*f,X=_+k+E+S+c*y;return e.set(0,0,z),e.set(0,1,j),e.set(0,2,V),e.set(1,0,D),e.set(1,1,O),e.set(1,2,q),e.set(2,0,U),e.set(2,1,L),e.set(2,2,X),e}mmulStrassen(t){var r=this.clone(),n=r.rows,i=r.columns,o=t.rows,s=t.columns;function a(t,r,n){var i=t.rows,o=t.columns;if(i===r&&o===n)return t;var s=e.zeros(r,n);return s=s.setSubMatrix(t,0,0)}i!==o&&console.warn(`Multiplying ${n} x ${i} and ${o} x ${s} matrix: dimensions do not match.`);var u=Math.max(n,o),h=Math.max(i,s);return function t(r,n,i,o){if(i<=512||o<=512)return r.mmul(n);i%2==1&&o%2==1?(r=a(r,i+1,o+1),n=a(n,i+1,o+1)):i%2==1?(r=a(r,i+1,o),n=a(n,i+1,o)):o%2==1&&(r=a(r,i,o+1),n=a(n,i,o+1));var s=parseInt(r.rows/2,10),u=parseInt(r.columns/2,10),h=r.subMatrix(0,s-1,0,u-1),c=n.subMatrix(0,s-1,0,u-1),l=r.subMatrix(0,s-1,u,r.columns-1),f=n.subMatrix(0,s-1,u,n.columns-1),g=r.subMatrix(s,r.rows-1,0,u-1),d=n.subMatrix(s,n.rows-1,0,u-1),v=r.subMatrix(s,r.rows-1,u,r.columns-1),m=n.subMatrix(s,n.rows-1,u,n.columns-1),p=t(e.add(h,v),e.add(c,m),s,u),w=t(e.add(g,v),c,s,u),y=t(h,e.sub(f,m),s,u),b=t(v,e.sub(d,c),s,u),x=t(e.add(h,l),m,s,u),M=t(e.sub(g,h),e.add(c,f),s,u),_=t(e.sub(l,v),e.add(d,m),s,u),k=e.add(p,b);k.sub(x),k.add(_);var E=e.add(y,x),S=e.add(w,b),A=e.sub(p,w);A.add(y),A.add(M);var R=e.zeros(2*k.rows,2*k.columns);return(R=(R=(R=(R=R.setSubMatrix(k,0,0)).setSubMatrix(E,k.rows,0)).setSubMatrix(S,0,k.columns)).setSubMatrix(A,k.rows,k.columns)).subMatrix(0,i-1,0,o-1)}(r=a(r,u,h),t=a(t,u,h),u,h)}scaleRows(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var r=this.constructor.empty(this.rows,this.columns),n=0;n<this.rows;n++){var i=dt(this.getRow(n),{min:t,max:e});r.setRow(n,i)}return r}scaleColumns(t,e){if((t=void 0===t?0:t)>=(e=void 0===e?1:e))throw new RangeError("min should be strictly smaller than max");for(var r=this.constructor.empty(this.rows,this.columns),n=0;n<this.columns;n++){var i=dt(this.getColumn(n),{min:t,max:e});r.setColumn(n,i)}return r}kroneckerProduct(t){t=this.constructor.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new this.constructor[Symbol.species](e*n,r*i),s=0;s<e;s++)for(var a=0;a<r;a++)for(var u=0;u<n;u++)for(var h=0;h<i;h++)o[n*s+u][i*a+h]=this.get(s,a)*t.get(u,h);return o}transpose(){for(var t=new this.constructor[Symbol.species](this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}sortRows(t){void 0===t&&(t=r);for(var e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}sortColumns(t){void 0===t&&(t=r);for(var e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}subMatrix(t,e,r,n){St(this,t,e,r,n);for(var i=new this.constructor[Symbol.species](e-t+1,n-r+1),o=t;o<=e;o++)for(var s=r;s<=n;s++)i[o-t][s-r]=this.get(o,s);return i}subMatrixRow(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||e<0||e>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");for(var n=new this.constructor[Symbol.species](t.length,r-e+1),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError("Row index out of range: "+t[i]);n.set(i,o-e,this.get(t[i],o))}return n}subMatrixColumn(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||e<0||e>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");for(var n=new this.constructor[Symbol.species](r-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError("Column index out of range: "+t[i]);n.set(o-e,i,this.get(o,t[i]))}return n}setSubMatrix(t,e,r){St(this,e,e+(t=this.constructor.checkMatrix(t)).rows-1,r,r+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this[e+n][r+i]=t.get(n,i);return this}selection(t,e){for(var r=_t(this,t,e),n=new this.constructor[Symbol.species](t.length,e.length),i=0;i<r.row.length;i++)for(var o=r.row[i],s=0;s<r.column.length;s++){var a=r.column[s];n[i][s]=this.get(o,a)}return n}trace(){for(var t=Math.min(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}transposeView(){return new Tt(this)}rowView(t){return yt(this,t),new Ct(this,t)}columnView(t){return bt(this,t),new jt(this,t)}flipRowView(){return new Vt(this)}flipColumnView(){return new Dt(this)}subMatrixView(t,e,r,n){return new It(this,t,e,r,n)}selectionView(t,e){return new Pt(this,t,e)}rowSelectionView(t){return new Nt(this,t)}columnSelectionView(t){return new zt(this,t)}det(){var t,e,r,n,i,o;if(this.isSquare())return 2===this.columns?(t=this.get(0,0),e=this.get(0,1),r=this.get(1,0),t*this.get(1,1)-e*r):3===this.columns?(n=this.selectionView([1,2],[1,2]),i=this.selectionView([1,2],[0,2]),o=this.selectionView([1,2],[0,1]),t=this.get(0,0),e=this.get(0,1),r=this.get(0,2),t*n.det()-e*i.det()+r*o.det()):new vt(this).determinant;throw Error("Determinant can only be calculated for a square matrix.")}pseudoInverse(t){void 0===t&&(t=Number.EPSILON);for(var e=new wt(this,{autoTranspose:!0}),r=e.leftSingularVectors,n=e.rightSingularVectors,i=e.diagonal,o=0;o<i.length;o++)Math.abs(i[o])>t?i[o]=1/i[o]:i[o]=0;return i=this.constructor[Symbol.species].diag(i),n.mmul(i.mmul(r.transposeView()))}clone(){for(var t=new this.constructor[Symbol.species](this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}}function r(t,e){return t-e}e.prototype.klass="Matrix",e.random=e.rand,e.diagonal=e.diag,e.prototype.diagonal=e.prototype.diag,e.identity=e.eye,e.prototype.negate=e.prototype.neg,e.prototype.tensorProduct=e.prototype.kroneckerProduct,e.prototype.determinant=e.prototype.det;var n,i="\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",o=eval;for(var s of[["+","add"],["-","sub","subtract"],["*","mul","multiply"],["/","div","divide"],["%","mod","modulus"],["&","and"],["|","or"],["^","xor"],["<<","leftShift"],[">>","signPropagatingRightShift"],[">>>","rightShift","zeroFillRightShift"]]){var a=o(k("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",{name:s[1],op:s[0]})),u=o(k("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% value);\n        }\n    }\n    return this;\n})\n",{name:s[1]+"S",op:s[0]})),h=o(k("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, this.get(i, j) %op% matrix.get(i, j));\n        }\n    }\n    return this;\n})\n",{name:s[1]+"M",op:s[0]})),c=o(k("\n(function %name%(matrix, value) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(value);\n})\n",{name:s[1]}));for(n=1;n<s.length;n++)e.prototype[s[n]]=a,e.prototype[s[n]+"S"]=u,e.prototype[s[n]+"M"]=h,e[s[n]]=c}var l=[["~","not"]];for(var f of(["abs","acos","acosh","asin","asinh","atan","atanh","cbrt","ceil","clz32","cos","cosh","exp","expm1","floor","fround","log","log1p","log10","log2","round","sign","sin","sinh","sqrt","tan","tanh","trunc"].forEach((function(t){l.push(["Math."+t,t])})),l)){var g=o(k("\n(function %name%() {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j)));\n        }\n    }\n    return this;\n})\n",{name:f[1],method:f[0]})),d=o(k("\n(function %name%(matrix) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%();\n})\n",{name:f[1]}));for(n=1;n<f.length;n++)e.prototype[f[n]]=g,e[f[n]]=d}for(var v of[["Math.pow",1,"pow"]]){var m="arg0";for(n=1;n<v[1];n++)m+=", arg"+n;if(1!==v[1]){var p=o(k("\n(function %name%(%args%) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), %args%));\n        }\n    }\n    return this;\n})\n",{name:v[2],method:v[0],args:m})),w=o(k(i,{name:v[2],args:m}));for(n=2;n<v.length;n++)e.prototype[v[n]]=p,e[v[n]]=w}else{var y={name:v[2],args:m,method:v[0]},b=o(k("\n(function %name%(value) {\n    if (typeof value === 'number') return this.%name%S(value);\n    return this.%name%M(value);\n})\n",y)),x=o(k("\n(function %name%S(value) {\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), value));\n        }\n    }\n    return this;\n})\n",y)),M=o(k("\n(function %name%M(matrix) {\n    matrix = this.constructor.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n        this.columns !== matrix.columns) {\n        throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (var i = 0; i < this.rows; i++) {\n        for (var j = 0; j < this.columns; j++) {\n            this.set(i, j, %method%(this.get(i, j), matrix.get(i, j)));\n        }\n    }\n    return this;\n})\n",y)),_=o(k("\n(function %name%(matrix, %args%) {\n    var newMatrix = new this[Symbol.species](matrix);\n    return newMatrix.%name%(%args%);\n})\n",y));for(n=2;n<v.length;n++)e.prototype[v[n]]=b,e.prototype[v[n]+"M"]=M,e.prototype[v[n]+"S"]=x,e[v[n]]=_}}function k(t,e){for(var r in e)t=t.replace(new RegExp(`%${r}%`,"g"),e[r]);return t}return e}class qt extends(Ot(Array)){constructor(t,e){var r;if(1===arguments.length&&"number"==typeof t)return new Array(t);if(qt.isMatrix(t))return t.clone();if(Number.isInteger(t)&&t>0){if(super(t),!(Number.isInteger(e)&&e>0))throw new TypeError("nColumns must be a positive integer");for(r=0;r<t;r++)this[r]=new Array(e)}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");{const n=t;if(t=n.length,"number"!=typeof(e=n[0].length)||0===e)throw new TypeError("Data must be a 2D array with at least one element");for(super(t),r=0;r<t;r++){if(n[r].length!==e)throw new RangeError("Inconsistent array dimensions");this[r]=[].concat(n[r])}}}return this.rows=t,this.columns=e,this}set(t,e,r){return this[t][e]=r,this}get(t,e){return this[t][e]}removeRow(t){if(yt(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.splice(t,1),this.rows-=1,this}addRow(t,e){return void 0===e&&(e=t,t=this.rows),yt(this,t,!0),e=xt(this,e),this.splice(t,0,e),this.rows+=1,this}removeColumn(t){if(bt(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var e=0;e<this.rows;e++)this[e].splice(t,1);return this.columns-=1,this}addColumn(t,e){void 0===e&&(e=t,t=this.columns),bt(this,t,!0),e=Mt(this,e);for(var r=0;r<this.rows;r++)this[r].splice(t,0,e[r]);return this.columns+=1,this}}Ot(),Symbol.species;class Ut extends(Ot()){constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}static get[Symbol.species](){return qt}}class Lt{constructor(t,e={}){const{assumeSymmetric:r=!1}=e;if(!(t=Ut.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");var n,i,o=t.columns,s=pt(o,o,0),a=new Array(o),u=new Array(o),h=t;if(!!r||t.isSymmetric()){for(n=0;n<o;n++)for(i=0;i<o;i++)s[n][i]=h.get(n,i);!function(t,e,r,n){var i,o,s,a,u,h,c,l;for(u=0;u<t;u++)r[u]=n[t-1][u];for(a=t-1;a>0;a--){for(l=0,s=0,h=0;h<a;h++)l+=Math.abs(r[h]);if(0===l)for(e[a]=r[a-1],u=0;u<a;u++)r[u]=n[a-1][u],n[a][u]=0,n[u][a]=0;else{for(h=0;h<a;h++)r[h]/=l,s+=r[h]*r[h];for(i=r[a-1],o=Math.sqrt(s),i>0&&(o=-o),e[a]=l*o,s-=i*o,r[a-1]=i-o,u=0;u<a;u++)e[u]=0;for(u=0;u<a;u++){for(i=r[u],n[u][a]=i,o=e[u]+n[u][u]*i,h=u+1;h<=a-1;h++)o+=n[h][u]*r[h],e[h]+=n[h][u]*i;e[u]=o}for(i=0,u=0;u<a;u++)e[u]/=s,i+=e[u]*r[u];for(c=i/(s+s),u=0;u<a;u++)e[u]-=c*r[u];for(u=0;u<a;u++){for(i=r[u],o=e[u],h=u;h<=a-1;h++)n[h][u]-=i*e[h]+o*r[h];r[u]=n[a-1][u],n[a][u]=0}}r[a]=s}for(a=0;a<t-1;a++){if(n[t-1][a]=n[a][a],n[a][a]=1,0!==(s=r[a+1])){for(h=0;h<=a;h++)r[h]=n[h][a+1]/s;for(u=0;u<=a;u++){for(o=0,h=0;h<=a;h++)o+=n[h][a+1]*n[h][u];for(h=0;h<=a;h++)n[h][u]-=o*r[h]}}for(h=0;h<=a;h++)n[h][a+1]=0}for(u=0;u<t;u++)r[u]=n[t-1][u],n[t-1][u]=0;n[t-1][t-1]=1,e[0]=0}(o,u,a,s),function(t,e,r,n){var i,o,s,a,u,h,c,l,f,g,d,v,m,p,w,y;for(s=1;s<t;s++)e[s-1]=e[s];e[t-1]=0;var b=0,x=0,M=Number.EPSILON;for(h=0;h<t;h++){for(x=Math.max(x,Math.abs(r[h])+Math.abs(e[h])),c=h;c<t&&!(Math.abs(e[c])<=M*x);)c++;if(c>h){0;do{for(1,i=r[h],l=(r[h+1]-i)/(2*e[h]),f=mt(l,1),l<0&&(f=-f),r[h]=e[h]/(l+f),r[h+1]=e[h]*(l+f),g=r[h+1],o=i-r[h],s=h+2;s<t;s++)r[s]-=o;for(b+=o,l=r[c],v=d=1,m=d,p=e[h+1],w=0,y=0,s=c-1;s>=h;s--)for(m=v,v=d,y=w,i=d*e[s],o=d*l,f=mt(l,e[s]),e[s+1]=w*f,w=e[s]/f,l=(d=l/f)*r[s]-w*i,r[s+1]=o+w*(d*i+w*r[s]),u=0;u<t;u++)o=n[u][s+1],n[u][s+1]=w*n[u][s]+d*o,n[u][s]=d*n[u][s]-w*o;l=-w*y*m*p*e[h]/g,e[h]=w*l,r[h]=d*l}while(Math.abs(e[h])>M*x)}r[h]=r[h]+b,e[h]=0}for(s=0;s<t-1;s++){for(u=s,l=r[s],a=s+1;a<t;a++)r[a]<l&&(u=a,l=r[a]);if(u!==s)for(r[u]=r[s],r[s]=l,a=0;a<t;a++)l=n[a][s],n[a][s]=n[a][u],n[a][u]=l}}(o,u,a,s)}else{var c=pt(o,o,0),l=new Array(o);for(i=0;i<o;i++)for(n=0;n<o;n++)c[n][i]=h.get(n,i);!function(t,e,r,n){var i,o,s,a,u,h,c,l=t-1;for(h=1;h<=l-1;h++){for(c=0,a=h;a<=l;a++)c+=Math.abs(e[a][h-1]);if(0!==c){for(s=0,a=l;a>=h;a--)r[a]=e[a][h-1]/c,s+=r[a]*r[a];for(o=Math.sqrt(s),r[h]>0&&(o=-o),s-=r[h]*o,r[h]=r[h]-o,u=h;u<t;u++){for(i=0,a=l;a>=h;a--)i+=r[a]*e[a][u];for(i/=s,a=h;a<=l;a++)e[a][u]-=i*r[a]}for(a=0;a<=l;a++){for(i=0,u=l;u>=h;u--)i+=r[u]*e[a][u];for(i/=s,u=h;u<=l;u++)e[a][u]-=i*r[u]}r[h]=c*r[h],e[h][h-1]=c*o}}for(a=0;a<t;a++)for(u=0;u<t;u++)n[a][u]=a===u?1:0;for(h=l-1;h>=1;h--)if(0!==e[h][h-1]){for(a=h+1;a<=l;a++)r[a]=e[a][h-1];for(u=h;u<=l;u++){for(o=0,a=h;a<=l;a++)o+=r[a]*n[a][u];for(o=o/r[h]/e[h][h-1],a=h;a<=l;a++)n[a][u]+=o*r[a]}}}(o,c,l,s),function(t,e,r,n,i){var o,s,a,u,h,c,l,f,g,d,v,m,p,w,y,b=t-1,x=t-1,M=Number.EPSILON,_=0,k=0,E=0,S=0,A=0,R=0,T=0,C=0;for(o=0;o<t;o++)for((o<0||o>x)&&(r[o]=i[o][o],e[o]=0),s=Math.max(o-1,0);s<t;s++)k+=Math.abs(i[o][s]);for(;b>=0;){for(u=b;u>0&&(0===(R=Math.abs(i[u-1][u-1])+Math.abs(i[u][u]))&&(R=k),!(Math.abs(i[u][u-1])<M*R));)u--;if(u===b)i[b][b]=i[b][b]+_,r[b]=i[b][b],e[b]=0,b--,C=0;else if(u===b-1){if(l=i[b][b-1]*i[b-1][b],E=(i[b-1][b-1]-i[b][b])/2,S=E*E+l,T=Math.sqrt(Math.abs(S)),i[b][b]=i[b][b]+_,i[b-1][b-1]=i[b-1][b-1]+_,f=i[b][b],S>=0){for(T=E>=0?E+T:E-T,r[b-1]=f+T,r[b]=r[b-1],0!==T&&(r[b]=f-l/T),e[b-1]=0,e[b]=0,f=i[b][b-1],R=Math.abs(f)+Math.abs(T),E=f/R,S=T/R,A=Math.sqrt(E*E+S*S),E/=A,S/=A,s=b-1;s<t;s++)T=i[b-1][s],i[b-1][s]=S*T+E*i[b][s],i[b][s]=S*i[b][s]-E*T;for(o=0;o<=b;o++)T=i[o][b-1],i[o][b-1]=S*T+E*i[o][b],i[o][b]=S*i[o][b]-E*T;for(o=0;o<=x;o++)T=n[o][b-1],n[o][b-1]=S*T+E*n[o][b],n[o][b]=S*n[o][b]-E*T}else r[b-1]=f+E,r[b]=f+E,e[b-1]=T,e[b]=-T;b-=2,C=0}else{if(f=i[b][b],g=0,l=0,u<b&&(g=i[b-1][b-1],l=i[b][b-1]*i[b-1][b]),10===C){for(_+=f,o=0;o<=b;o++)i[o][o]-=f;R=Math.abs(i[b][b-1])+Math.abs(i[b-1][b-2]),f=g=.75*R,l=-.4375*R*R}if(30===C&&(R=(R=(g-f)/2)*R+l)>0){for(R=Math.sqrt(R),g<f&&(R=-R),R=f-l/((g-f)/2+R),o=0;o<=b;o++)i[o][o]-=R;_+=R,f=g=l=.964}for(C+=1,h=b-2;h>=u&&(T=i[h][h],E=((A=f-T)*(R=g-T)-l)/i[h+1][h]+i[h][h+1],S=i[h+1][h+1]-T-A-R,A=i[h+2][h+1],R=Math.abs(E)+Math.abs(S)+Math.abs(A),E/=R,S/=R,A/=R,h!==u)&&!(Math.abs(i[h][h-1])*(Math.abs(S)+Math.abs(A))<M*(Math.abs(E)*(Math.abs(i[h-1][h-1])+Math.abs(T)+Math.abs(i[h+1][h+1]))));)h--;for(o=h+2;o<=b;o++)i[o][o-2]=0,o>h+2&&(i[o][o-3]=0);for(a=h;a<=b-1&&(w=a!==b-1,a!==h&&(E=i[a][a-1],S=i[a+1][a-1],A=w?i[a+2][a-1]:0,0!==(f=Math.abs(E)+Math.abs(S)+Math.abs(A))&&(E/=f,S/=f,A/=f)),0!==f);a++)if(R=Math.sqrt(E*E+S*S+A*A),E<0&&(R=-R),0!==R){for(a!==h?i[a][a-1]=-R*f:u!==h&&(i[a][a-1]=-i[a][a-1]),f=(E+=R)/R,g=S/R,T=A/R,S/=E,A/=E,s=a;s<t;s++)E=i[a][s]+S*i[a+1][s],w&&(E+=A*i[a+2][s],i[a+2][s]=i[a+2][s]-E*T),i[a][s]=i[a][s]-E*f,i[a+1][s]=i[a+1][s]-E*g;for(o=0;o<=Math.min(b,a+3);o++)E=f*i[o][a]+g*i[o][a+1],w&&(E+=T*i[o][a+2],i[o][a+2]=i[o][a+2]-E*A),i[o][a]=i[o][a]-E,i[o][a+1]=i[o][a+1]-E*S;for(o=0;o<=x;o++)E=f*n[o][a]+g*n[o][a+1],w&&(E+=T*n[o][a+2],n[o][a+2]=n[o][a+2]-E*A),n[o][a]=n[o][a]-E,n[o][a+1]=n[o][a+1]-E*S}}}if(0===k)return;for(b=t-1;b>=0;b--)if(E=r[b],0===(S=e[b]))for(u=b,i[b][b]=1,o=b-1;o>=0;o--){for(l=i[o][o]-E,A=0,s=u;s<=b;s++)A+=i[o][s]*i[s][b];if(e[o]<0)T=l,R=A;else if(u=o,0===e[o]?i[o][b]=0!==l?-A/l:-A/(M*k):(f=i[o][o+1],g=i[o+1][o],S=(r[o]-E)*(r[o]-E)+e[o]*e[o],c=(f*R-T*A)/S,i[o][b]=c,i[o+1][b]=Math.abs(f)>Math.abs(T)?(-A-l*c)/f:(-R-g*c)/T),c=Math.abs(i[o][b]),M*c*c>1)for(s=o;s<=b;s++)i[s][b]=i[s][b]/c}else if(S<0)for(u=b-1,Math.abs(i[b][b-1])>Math.abs(i[b-1][b])?(i[b-1][b-1]=S/i[b][b-1],i[b-1][b]=-(i[b][b]-E)/i[b][b-1]):(y=Xt(0,-i[b-1][b],i[b-1][b-1]-E,S),i[b-1][b-1]=y[0],i[b-1][b]=y[1]),i[b][b-1]=0,i[b][b]=1,o=b-2;o>=0;o--){for(d=0,v=0,s=u;s<=b;s++)d+=i[o][s]*i[s][b-1],v+=i[o][s]*i[s][b];if(l=i[o][o]-E,e[o]<0)T=l,A=d,R=v;else if(u=o,0===e[o]?(y=Xt(-d,-v,l,S),i[o][b-1]=y[0],i[o][b]=y[1]):(f=i[o][o+1],g=i[o+1][o],m=(r[o]-E)*(r[o]-E)+e[o]*e[o]-S*S,p=2*(r[o]-E)*S,0===m&&0===p&&(m=M*k*(Math.abs(l)+Math.abs(S)+Math.abs(f)+Math.abs(g)+Math.abs(T))),y=Xt(f*A-T*d+S*v,f*R-T*v-S*d,m,p),i[o][b-1]=y[0],i[o][b]=y[1],Math.abs(f)>Math.abs(T)+Math.abs(S)?(i[o+1][b-1]=(-d-l*i[o][b-1]+S*i[o][b])/f,i[o+1][b]=(-v-l*i[o][b]-S*i[o][b-1])/f):(y=Xt(-A-g*i[o][b-1],-R-g*i[o][b],T,S),i[o+1][b-1]=y[0],i[o+1][b]=y[1])),c=Math.max(Math.abs(i[o][b-1]),Math.abs(i[o][b])),M*c*c>1)for(s=o;s<=b;s++)i[s][b-1]=i[s][b-1]/c,i[s][b]=i[s][b]/c}for(o=0;o<t;o++)if(o<0||o>x)for(s=o;s<t;s++)n[o][s]=i[o][s];for(s=t-1;s>=0;s--)for(o=0;o<=x;o++){for(T=0,a=0;a<=Math.min(s,x);a++)T+=n[o][a]*i[a][s];n[o][s]=T}}(o,u,a,s,c)}this.n=o,this.e=u,this.d=a,this.V=s}get realEigenvalues(){return this.d}get imaginaryEigenvalues(){return this.e}get eigenvectorMatrix(){return qt.isMatrix(this.V)||(this.V=new qt(this.V)),this.V}get diagonalMatrix(){var t,e,r=this.n,n=this.e,i=this.d,o=new qt(r,r);for(t=0;t<r;t++){for(e=0;e<r;e++)o[t][e]=0;o[t][t]=i[t],n[t]>0?o[t][t+1]=n[t]:n[t]<0&&(o[t][t-1]=n[t])}return o}}function Xt(t,e,r,n){var i,o;return Math.abs(r)>Math.abs(n)?[(t+(i=n/r)*e)/(o=r+i*n),(e-i*t)/o]:[((i=r/n)*t+e)/(o=n+i*r),(i*e-t)/o]}function Gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ht=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nodes=e,this._edges=r;var i={margin:.05,direction:"left-right"};U.extend(i,n),this._options=i}var e,r,n;return e=t,(r=[{key:"apply",value:function(){for(var t=Y(this._nodes.length,this._nodes.length),e=0;e<this._edges.length;++e){var r=this._edges[e].source.index,n=this._edges[e].target.index;t[r][n]=-1,t[n][r]=-1}for(var i=0;i<this._nodes.length;++i)t[i][i]=-t[i].reduce((function(t,e){return t+e}),0);var o=new Lt(t),s=function(t){var e=Math.min.apply(null,t),r=t.indexOf(e);t[r]=1/0;var n=Math.min.apply(null,t),i=t.indexOf(n);t[i]=1/0;var o=Math.min.apply(null,t);return[i,t.indexOf(o)]}(o.realEigenvalues),a=o.eigenvectorMatrix.transpose(),u=function(t,e){for(var r=Math.max.apply(null,t.map(Math.abs)),n=Math.max.apply(null,e.map(Math.abs)),i=Math.min.apply(null,t),o=Math.min.apply(null,e),s=0;s<t.length;++s)t[s]=.1+(t[s]-i)/(1.25*(r-i)),e[s]=.1+(e[s]-o)/(1.25*(n-o));return[t,e]}(a[s[0]],a[s[1]]);return this._nodes.forEach((function(t,e){t.x=u[0][e],t.y=u[1][e]})),this._options}}])&&Gt(e.prototype,r),n&&Gt(e,n),t}();function Yt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var $t=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nodes=e,this._edges=r,this._epsilon=1e-8,this._MAX_ITTERATIONS=100,this._num_elements=e.length,this._dims=2;var i={margin:.05,direction:"left-right"};U.extend(i,n),this._options=i}var e,r,n;return e=t,(r=[{key:"apply",value:function(){for(var t=Y(this._nodes.length,this._nodes.length),e=0;e<this._edges.length;++e){var r=this._edges[e].source.index,n=this._edges[e].target.index;t[r][n]=1}var i=function(t){for(var e=Kt(t.length),r=0;r<t.length;r++){for(var n=0,i=0;i<t[r].length;i++)n+=t[r][i];e[r]=n+1}return e}(t),o=this._dims+1,s=new Array(o);s[0]=Wt(function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=1;return e}(this._num_elements));for(var a=1;a<o;a++)s[a]=Kt(this._num_elements);for(var u=1;u<o;u++){for(var h=Wt(Bt(this._num_elements)),c=0,l=!1;!l;){for(var f=h.slice(),g=0;g<u;g++){for(var d=s[g],v=0,m=0,p=0;p<f.length;p++)v+=f[p]*i[p]*d[p],m+=d[p]*i[p]*d[p];for(var w=v/m,y=0;y<f.length;y++)f[y]=f[y]-w*d[y]}for(var b=0;b<h.length;b++)h[b]=.5*(f[b]+Ft(t[b],f)/i[b]);l=(c+=1)>100|!(Ft(h=Wt(h),f)<1-this._epsilon)}s[u]=h.slice()}var x=Qt(s[1]),M=Qt(s[2]);return this._nodes.forEach((function(t,e){t.x=x[e],t.y=M[e]})),this._options}}])&&Yt(e.prototype,r),n&&Yt(e,n),t}();function Ft(t,e){for(var r=0,n=0;n<t.length;n++)r+=t[n]*e[n];return r}function Wt(t){for(var e=function(t){for(var e=0,r=0;r<t.length;r++)e+=Math.pow(t[r],2);return Math.sqrt(e)}(t),r=new Array(t.length),n=0;n<t.length;n++)r[n]=t[n]/e;return r}function Bt(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=Math.random();return e}function Kt(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e}function Qt(t){for(var e=Math.max.apply(null,t.map(Math.abs)),r=Math.min.apply(null,t),n=0;n<t.length;++n)t[n]=.1+(t[n]-r)/(1.25*(e-r));return t}function Jt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Zt=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nodes=e,this._edges=r;var i={starting_angle:Math.PI/2,radius:.05,margin:.05,direction:"left-right",nlines:5};U.extend(i,n),this._options=i}var e,r,n;return e=t,(r=[{key:"apply",value:function(){for(var t=$(this._nodes,this._edges),e=Math.ceil(this._nodes.length/this._options.nlines),r=(.5-this._options.radius)/e,n=2*Math.PI/this._options.nlines,i=this._options.starting_angle,o=this._options.radius,s=0,a=0;a<this._nodes.length;++a){var u=t.nodes[a].index;this._nodes[u].x=.05+(o+r*(a-s*e))*Math.cos(n*s+i),this._nodes[u].y=.05+(o+r*(a-s*e))*Math.sin(n*s+i),s=Math.floor(a/e)}for(var h=[],c=0;c<this._nodes.length;++c){var l=t.nodes[c].index;h.push(this._nodes[l])}return this._options}}])&&Jt(e.prototype,r),n&&Jt(e,n),t}();function te(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ee=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nodes=e,this._edges=r;var i={margin:.05,direction:"left-right"};U.extend(i,n),this._options=i}var e,r,n;return e=t,(r=[{key:"apply",value:function(){var t=$(this._nodes,this._edges),e=Math.sqrt(this._nodes.length);if(e-Math.floor(e)>0)var r=Math.floor(e)+1;else r=e;var n=1/r,i=this._nodes.length/r;if(i-Math.floor(i)>0)var o=Math.floor(i)+1;else o=i;for(var s=1/(o-2),a=0;a<this._nodes.length;++a){var u=Math.floor(a/(r+1));this._nodes[t.nodes[a].index].x=n*(a-u*(r+1)),this._nodes[t.nodes[a].index].y=s*u,this._nodes[t.nodes[a].index].weight=t.degrees[a]}return this._options}}])&&te(e.prototype,r),n&&te(e,n),t}();function re(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ne=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nodes=e,this._edges=r;var i={margin:.05,direction:"left-right",hubs:.1,intermediary:.2,method:"fixed_fractions"};U.extend(i,n),this._options=i}var e,r,n;return e=t,(r=[{key:"apply",value:function(){for(var t=$(this._nodes,this._edges),e=Math.floor(this._nodes.length*(this._options.hubs+this._options.intermediary)),r=Math.floor(this._nodes.length*this._options.hubs),n=(1-2*this._options.margin)/2/(r-1),i=Math.PI/(r-1),o=0;o<r;)r>1?(this._nodes[t.nodes[o].index].x=this._options.margin+n*o,this._nodes[t.nodes[o].index].y=this._options.margin+.4+.4*Math.sin(o*i)):(this._nodes[t.nodes[o].index].x=(1-2*this._options.margin)/4,this._nodes[t.nodes[o].index].y=this._options.margin+.4+.4),++o;var s=e-r,a=Math.PI/s,u=(1-2*this._options.margin)/2/s;for(o=0;o<s;)this._nodes[t.nodes[o+r].index].x=.5+u*(o+1),this._nodes[t.nodes[o+r].index].y=this._options.margin+.4+.4*Math.sin(Math.PI+(o+1)*a),++o;var h=[.85,.75],c=[.4,1-this._options.margin],l=this._nodes.length-e,f=(c[0]-h[0])/(l-1),g=(c[1]-h[1])/(l-1);for(o=0;o<l;)this._nodes[t.nodes[o+e].index].x=h[0]+f*o,this._nodes[t.nodes[o+e].index].y=h[1]+g*o,++o;return this._options}}])&&re(e.prototype,r),n&&re(e,n),t}();function ie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var oe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"normalize",value:function(t,e){var r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{direction:"left-right",margin:.05},o=t.length;if(e)r=e.minX,n=e.minY;else{var s=-1/0,a=-1/0;r=n=1/0;for(var u=0;u<o;u++){var h=t[u];s=Math.max(s,h.x),a=Math.max(a,h.y),r=Math.min(r,h.x),n=Math.min(n,h.y)}e={maxX:s,maxY:a,minX:r,minY:n}}var c=1-2*i.margin,l=r!==e.maxX?c/(e.maxX-r):(r-=.5,1),f=n!==e.maxY?c/(e.maxY-n):(n-=.5,1),g=i.direction;switch(g){case"left-right":for(var d=0;d<o;++d){var v=t[d];v.x=l*(v.x-r)+i.margin,v.y=f*(v.y-n)+i.margin}break;case"right-left":for(var m=0;m<o;++m){var p=t[m];p.x=1-(l*(p.x-r)+i.margin),p.y=f*(p.y-n)+i.margin}break;case"top-down":for(var w=0;w<o;++w){var y=t[w],b=1-l*(y.x-r)+i.margin;y.x=f*(y.y-n)+i.margin,y.y=b}break;case"bottom-up":for(var x=0;x<t.length;++x){var M=t[x],_=l*(M.x-r)+i.margin;M.x=f*(M.y-n)+i.margin,M.y=_}break;default:throw new Error("directions can be only 'left-right' (default), 'right-left', 'top-down' or 'bottom-up'")}return e}},{key:"force",get:function(){return O}},{key:"random",get:function(){return X}},{key:"circular",get:function(){return Z}},{key:"tree",get:function(){return et}},{key:"tree2",get:function(){return nt}},{key:"hierarchical",get:function(){return ot}},{key:"hierarchical2",get:function(){return ut}},{key:"spectral",get:function(){return Ht}},{key:"spectral2",get:function(){return $t}},{key:"hive",get:function(){return Zt}},{key:"grid",get:function(){return ee}},{key:"versinus",get:function(){return ne}}],(r=null)&&ie(e.prototype,r),n&&ie(e,n),t}();function se(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ae=0,ue=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"checkUniqId",value:function(t){void 0!==t.__uniqid?(t.uniqid=t.__uniqid,delete t.__uniqid):void 0===t.uniqid&&(t.uniqid=++ae)}},{key:"getContext",value:function(t){var e={depth:!1,antialias:!1};return t.getContext("webgl",e)||t.getContext("experimental-webgl",e)}},{key:"initCoordinates",value:function(t,e,r){for(var n=[],i=[],o=[],s=0;s<e.length;s++){var a=e[s];"number"==typeof a.source&&(a.source=t[a.source]),"number"==typeof a.target&&(a.target=t[a.target])}for(var u=function(t){return t.uniqid||-t.index||-t.nidx},h=0;h<t.length;h++)t[h].index=h;for(var c=0,l=t.length+10;c<e.length;c++,l++)e[c].nidx=l;var f=[],g=new Uint32Array(e.length),d={k:"_",kArrow:"_",d:[]},v={k:"circles",kArrow:"circleArrows",d:o},m={k:"lines",kArrow:"lineArrows",d:n},p={k:"curves",kArrow:"curveArrows",d:i},w={};if("svg_context"==r?w.svg=!0:w=r?j.initExtensions(r,"OES_standard_derivatives"):{},w.OES_standard_derivatives||w.svg){for(var y={},b=0;b<e.length;b++){var x=e[b],M=u(x.source),_=u(x.target);(y[M]||(y[M]={}))[_]=!0}for(var k=0;k<e.length;k++){var E=void 0,S=e[k],A=u(S.source),R=u(S.target),T=d;if(A===R)S.t=2,E=o,T=v;else{var C=y[R];C&&C[A]?(S.t=1,E=i,T=p):(S.t=0,E=n,T=m)}f.push(T),g[k]=T.d.length,E.push(S)}}else for(var I=0;I<e.length;I++){var P=e[I],N=d;u(P.source)!==u(P.target)&&(N=m,P.t=0,n.push(P)),f.push(N),g[I]=N.d.length}return{nodes:t,nodesParts:V(t),circles:o,circlesParts:V(o),lines:n,linesParts:V(n),curves:i,curvesParts:V(i)}}},{key:"getDrawEntites",value:function(t,e,r){var n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0,s=this.initCoordinates(t,e,o);if("string"==typeof r)n=new oe[r](t,e,i).apply();else if("function"==typeof r)n=new r(t,e,i).apply();else if("number"==typeof r)throw new Error("The layout can only be a string or a function or a class");return r&&oe.normalize(t,void 0,n),s}}],(r=null)&&se(e.prototype,r),n&&se(e,n),t}();function he(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){return void r(t)}a.done?e(u):Promise.resolve(u).then(n,i)}function ce(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){he(o,n,i,s,a,"next",t)}function a(t){he(o,n,i,s,a,"throw",t)}s(void 0)}))}}ccNetVizAdvanced.prototype.elementRenderers.svg=function(t,e){var r,n=this,i=[],o=[],s=e.styles.node=e.styles.node||{};if(s.minSize=null!=s.minSize?s.minSize:6,s.maxSize=s.maxSize||16,s.color=s.color||"rgb(255, 255, 255)",s.label){var a=s.label;a.color=a.color||"rgb(120, 120, 120)",a.font=a.font||{type:"Arial, Helvetica, sans-serif",size:11}}var u=e.styles.edge=e.styles.edge||{arrow:{}};if(u.width=u.width||1,u.color=u.color||"rgb(204, 204, 204)",u.animateColor=u.animateColor||"rgb(240, 80, 120)",u.animateSpeed=u.animateSpeed||1,u.animateDotNum=u.animateDotNum||7,u.animateDotInterval=u.animateDotInterval||.5,u.animateMaxWidth=u.animateMaxWidth||u.width,u.label){var h=u.label;h.color=h.color||"rgb(120, 120, 120)",h.font=h.font||{type:"Arial, Helvetica, sans-serif",size:11}}if(u.arrow&&void 0!==u.arrow.texture){var c=u.arrow;c.minSize=null!=c.minSize?c.minSize:6,c.maxSize=c.maxSize||12,c.aspect=1}this.set=function(){var t=ce(regeneratorRuntime.mark((function t(e,s,a){var u,h=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=h.length>3&&void 0!==h[3]?h[3]:{},o=s||[],(i=e||[]).forEach(ue.checkUniqId),o.forEach(ue.checkUniqId),r=ue.getDrawEntites(i,o,a,u,"svg_context"),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),this.draw=ce(regeneratorRuntime.mark((function n(){var i,o,s,a,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.setAttribute("style","background-color:"+e.styles.background.color||!1),i={},o=new l,n.next=5,o.set(r,t,e.styles,i);case 5:return s=new d,n.next=8,s.set(r,t,e.styles,i);case 8:return a=new p,n.next=11,a.set(r,t,e.styles,i);case 11:return(new R).set(r,t,e.styles),u=new N,n.next=16,u.set(r,t,e.styles);case 16:case"end":return n.stop()}}),n)})))}}]);